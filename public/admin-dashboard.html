<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</title>
    
    <!-- ğŸŒ 2025-12-24: êµ¬ê¸€ ë²ˆì—­ ì¿ í‚¤ ì‚¬ì „ ì„¤ì • -->
    <script>
        (function() {
            var storedLang = null;
            try { storedLang = localStorage.getItem('appLanguage'); } catch(e) {}
            var lang = storedLang || 'ko';
            if (lang && lang !== 'ko' && /^[a-z]{2}(-[A-Z]{2})?$/.test(lang)) {
                var domain = window.location.hostname;
                document.cookie = 'googtrans=/ko/' + lang + ';path=/;domain=' + domain;
                document.cookie = 'googtrans=/ko/' + lang + ';path=/';
                console.log('ğŸŒ [admin-dashboard.html] googtrans ì¿ í‚¤ ì„¤ì •:', lang);
            }
        })();
    </script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            background: #f5f5f5;
        }
        .tab-button {
            transition: all 0.2s;
        }
        .tab-button.active {
            background: white;
            border-bottom: 2px solid #4285F4;
        }
        .stat-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .max-w-7xl {
                padding: 1rem;
            }
            #guidesGrid {
                grid-template-columns: 1fr !important;
            }
            #createShareBtn {
                font-size: 0.875rem;
                padding: 0.5rem 1rem;
            }
            .tab-button {
                font-size: 0.875rem;
                padding: 0.75rem 1rem;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1023px) {
            #guidesGrid {
                grid-template-columns: repeat(2, 1fr) !important;
            }
        }
        
        @media (min-width: 1024px) {
            #guidesGrid {
                grid-template-columns: repeat(3, 1fr) !important;
            }
        }
        
        /* ìƒì„¸í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ CSS - ë™ì  ì‚½ì…ë¨ */
        :root {
            --gemini-blue: #4285F4;
        }
        .text-gemini-blue { color: var(--gemini-blue); }
        .hidden { display: none !important; }
        
        /* âš ï¸ ìƒì„¸í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ (profile.html ë³µë¶™ - 2025-12-15) */
        #adminDetailPage {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 9998;
            display: flex;
            flex-direction: column;
        }
        #adminDetailPage .full-screen-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            object-fit: cover;
            z-index: 1;
        }
        #adminDetailPage .header-safe-area {
            position: relative;
            width: 100%;
            height: 60px;
            flex-shrink: 0;
            z-index: 30;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 1rem;
        }
        #adminDetailPage .info-fixed-area {
            position: relative;
            width: 100%;
            flex-shrink: 0;
            z-index: 25;
            padding: 0 1rem 0.5rem 1rem;
        }
        #adminDetailPage .content-safe-area {
            position: relative;
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            background: transparent;
            z-index: 20;
        }
        #adminDetailPage .text-content {
            padding: 1.5rem;
            line-height: 1.8;
            word-break: keep-all;
            overflow-wrap: break-word;
        }
        #adminDetailPage .readable-on-image {
            color: white;
        }
        #adminDetailPage .footer-safe-area {
            position: relative;
            width: 100%;
            height: 100px;
            flex-shrink: 0;
            z-index: 30;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1.5rem;
            padding: 0 1rem;
            background: transparent;
        }
        #adminDetailPage .interactive-btn {
            transition: transform 0.1s ease, background-color 0.2s ease;
        }
        #adminDetailPage .interactive-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- âš ï¸ ìƒì„¸í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ HTML (profile.html ë³µë¶™ - 2025-12-15) -->
    <div id="adminDetailPage" class="hidden">
        <img id="adminDetailImage" src="" alt="ìƒì„¸í˜ì´ì§€ ì´ë¯¸ì§€" class="full-screen-bg">
        <header class="header-safe-area">
            <button id="adminDetailBackBtn" class="w-12 h-12 flex items-center justify-center rounded-full bg-black/60 backdrop-blur-md text-gemini-blue interactive-btn shadow-2xl absolute top-1/2 right-4 -translate-y-1/2" style="z-index: 10001; pointer-events: auto;" aria-label="ë‹«ê¸°">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </header>
        <div class="info-fixed-area">
            <div id="adminDetailLocationInfo" class="hidden flex items-center gap-2 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-2 shadow-md">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gemini-blue flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
                    <path fill-rule="evenodd" d="M11.54 22.351l.07.04.028.016a.76.76 0 00.723 0l.028-.015.071-.041a16.975 16.975 0 001.144-.742 19.58 19.58 0 002.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 00-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 002.682 2.282 16.975 16.975 0 001.145.742zM12 13.5a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
                </svg>
                <span id="adminDetailLocationName" class="text-base font-semibold text-gray-800"></span>
            </div>
            <div id="adminDetailVoiceQueryInfo" class="hidden flex items-center gap-2 bg-white/90 backdrop-blur-sm rounded-lg px-3 py-2 shadow-md mt-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gemini-blue flex-shrink-0" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M8.25 4.5a3.75 3.75 0 117.5 0v8.25a3.75 3.75 0 11-7.5 0V4.5z" />
                    <path d="M6 10.5a.75.75 0 01.75.75v1.5a5.25 5.25 0 1010.5 0v-1.5a.75.75 0 011.5 0v1.5a6.751 6.751 0 01-6 6.709v2.291h3a.75.75 0 010 1.5h-7.5a.75.75 0 010-1.5h3v-2.291a6.751 6.751 0 01-6-6.709v-1.5A.75.75 0 016 10.5z" />
                </svg>
                <span id="adminDetailVoiceQueryText" class="text-base font-semibold text-gray-800"></span>
            </div>
        </div>
        <div class="content-safe-area">
            <div id="adminDetailTextOverlay" class="text-content">
                <p id="adminDetailDescription" class="readable-on-image text-xl leading-relaxed"></p>
            </div>
        </div>
        <footer class="footer-safe-area">
            <button id="adminDetailAudioBtn" aria-label="ì˜¤ë””ì˜¤ ì¬ìƒ" class="w-16 h-16 flex items-center justify-center rounded-full bg-black/60 backdrop-blur-md text-gemini-blue interactive-btn shadow-2xl">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor">
                    <path fill-rule="evenodd" d="M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.648c1.295.748 1.295 2.538 0 3.286L7.279 20.99c-1.25.717-2.779-.217-2.779-1.643V5.653z" clip-rule="evenodd" />
                </svg>
            </button>
            <button id="adminDetailTextToggleBtn" aria-label="í•´ì„¤ ì½ê¸°" class="w-16 h-16 flex items-center justify-center rounded-full bg-black/60 backdrop-blur-md text-gemini-blue interactive-btn shadow-2xl">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
            </button>
        </footer>
    </div>

    <div class="max-w-7xl mx-auto p-6">
        <!-- í—¤ë” -->
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-2xl font-bold text-gray-900">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h1>
            <button onclick="window.close()" class="px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition">
                ë‹«ê¸°
            </button>
        </div>

        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="bg-white rounded-lg shadow-sm mb-6 overflow-x-auto">
            <div class="flex border-b min-w-max">
                <button onclick="showTab('overview')" id="tab-overview" class="tab-button active px-4 sm:px-6 py-3 font-medium text-gray-700 whitespace-nowrap text-sm sm:text-base">
                    ìš”ì•½
                </button>
                <button onclick="showTab('content')" id="tab-content" class="tab-button px-4 sm:px-6 py-3 font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap text-sm sm:text-base">
                    ê³µìœ í˜ì´ì§€
                </button>
                <button onclick="showTab('guides')" id="tab-guides" class="tab-button px-4 sm:px-6 py-3 font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap text-sm sm:text-base">
                    ìƒì„¸í˜ì´ì§€
                </button>
                <button onclick="showTab('revenue')" id="tab-revenue" class="tab-button px-4 sm:px-6 py-3 font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap text-sm sm:text-base">
                    ìˆ˜ìµ
                </button>
                <button onclick="showTab('stats')" id="tab-stats" class="tab-button px-4 sm:px-6 py-3 font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap text-sm sm:text-base">
                    í†µê³„
                </button>
                <button onclick="showTab('cashback')" id="tab-cashback" class="tab-button px-4 sm:px-6 py-3 font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap text-sm sm:text-base">
                    ğŸ’° ìºì‹œë°±
                </button>
                <button onclick="showTab('prompts')" id="tab-prompts" class="tab-button px-4 sm:px-6 py-3 font-medium text-gray-500 hover:text-gray-700 whitespace-nowrap text-sm sm:text-base">
                    ğŸ¯ AI í”„ë¡¬í”„íŠ¸
                </button>
            </div>
        </div>

        <!-- ë¡œë”© ìƒíƒœ -->
        <div id="loading" class="text-center py-12">
            <div class="inline-block animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-blue-500"></div>
            <p class="mt-4 text-gray-600">ë°ì´í„° ë¡œë”© ì¤‘...</p>
        </div>

        <!-- ìš”ì•½ íƒ­ -->
        <div id="content-overview" class="hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                <!-- ê°€ì…ì -->
                <div class="stat-card bg-white rounded-lg p-6 shadow-sm">
                    <h3 class="text-sm font-medium text-gray-500 mb-2">ê°€ì…ì</h3>
                    <p id="totalUsers" class="text-3xl font-bold text-gray-900 mb-1">-</p>
                    <p class="text-sm text-gray-500">ìµœê·¼ 7ì¼: <span id="recentUsers" class="font-semibold text-blue-600">-</span>ëª…</p>
                </div>

                <!-- AI í˜¸ì¶œ íšŸìˆ˜ -->
                <div class="stat-card bg-white rounded-lg p-6 shadow-sm">
                    <h3 class="text-sm font-medium text-gray-500 mb-2">AI í˜¸ì¶œ íšŸìˆ˜</h3>
                    <p id="totalApiCalls" class="text-3xl font-bold text-gray-900 mb-1">-</p>
                    <p class="text-sm text-gray-500">ì˜ˆìƒ ë¹„ìš©: <span id="estimatedCost" class="font-semibold text-orange-600">-</span></p>
                </div>

                <!-- ê³µìœ  ë§í¬ -->
                <div class="stat-card bg-white rounded-lg p-6 shadow-sm">
                    <h3 class="text-sm font-medium text-gray-500 mb-2">ê³µìœ  ë§í¬</h3>
                    <p id="totalShares" class="text-3xl font-bold text-gray-900 mb-1">-</p>
                    <p class="text-sm text-gray-500">ìƒì„±ëœ ë§í¬</p>
                </div>

                <!-- ê³µìœ  ì¡°íšŒìˆ˜ -->
                <div class="stat-card bg-white rounded-lg p-6 shadow-sm">
                    <h3 class="text-sm font-medium text-gray-500 mb-2">ê³µìœ  ì¡°íšŒìˆ˜</h3>
                    <p id="totalViews" class="text-3xl font-bold text-gray-900 mb-1">-</p>
                    <p class="text-sm text-gray-500">ëˆ„ì  ì¡°íšŒ</p>
                </div>
            </div>

            <!-- ë¡œê·¸ì¸ ë°©ì‹ -->
            <div class="bg-white rounded-lg p-6 shadow-sm">
                <h2 class="text-lg font-semibold text-gray-900 mb-4">ë¡œê·¸ì¸ ë°©ì‹ë³„ ì‚¬ìš©ì</h2>
                <div id="providerStats" class="space-y-3">
                    <!-- ë™ì  ìƒì„± -->
                </div>
            </div>
        </div>

        <!-- ì½˜í…ì¸  íƒ­ (from index.html Featured ê°¤ëŸ¬ë¦¬ ê´€ë¦¬) -->
        <div id="content-content" class="hidden">
            <!-- ì¶”ì²œ ëª¨ìŒ ê´€ë¦¬ (ê´€ë¦¬ì ì „ìš©) -->
            <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-yellow-500">
                <div class="flex items-center justify-between mb-3">
                    <h2 class="text-lg font-semibold text-gray-800">â­ ì¶”ì²œ ëª¨ìŒ ê´€ë¦¬</h2>
                    <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded">ê´€ë¦¬ì ì „ìš©</span>
                </div>
                <p class="text-sm text-gray-500 mb-4">ì¶”ì²œ ê°¤ëŸ¬ë¦¬ì— í‘œì‹œí•  ê³µìœ  í˜ì´ì§€ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš” (ìµœëŒ€ 3ê°œ)</p>
                
                <div class="space-y-4">
                    <!-- ê²€ìƒ‰ì°½ -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ğŸ” ê³µìœ  í˜ì´ì§€ ì´ë¦„ ê²€ìƒ‰</label>
                        <input 
                            type="text" 
                            id="shareSearchInput" 
                            placeholder="ì˜ˆ: ì² ìˆ˜ì•„ë¹  íŒŒë¦¬3ì¼ì—¬í–‰" 
                            class="w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 text-base"
                            data-testid="input-share-search"
                        />
                    </div>
                    
                    <!-- ê²€ìƒ‰ ê²°ê³¼ -->
                    <div id="searchResults" class="space-y-2 max-h-80 overflow-y-auto">
                        <p class="text-sm text-gray-400 text-center py-4">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>
                    </div>
                </div>
                
                <!-- í˜„ì¬ Featured ëª©ë¡ -->
                <div class="mt-6 pt-6 border-t border-gray-200">
                    <h3 class="text-sm font-semibold text-gray-700 mb-3">í˜„ì¬ Featured (<span id="featuredCount">0</span>/3)</h3>
                    <div id="featuredList" class="space-y-2">
                        <p class="text-sm text-gray-400">ë¡œë”© ì¤‘...</p>
                    </div>
                </div>
            </div>

            <!-- ì „ì²´ëª©ë¡ -->
            <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm mt-6">
                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4">
                    <h2 class="text-lg font-semibold text-gray-900">ì „ì²´ëª©ë¡</h2>
                    <div class="flex flex-wrap gap-2">
                        <button onclick="regenerateAllV1()" class="px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition flex items-center gap-1 text-sm" data-testid="btn-regenerate-all-v1">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                            </svg>
                            V1 ì¬ìƒì„±
                        </button>
                        <input type="text" id="allSharesSearch" placeholder="ê²€ìƒ‰..." class="flex-1 min-w-[100px] px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm">
                        <select id="sortOrder" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm">
                            <option value="latest">ìµœì‹ ìˆœ</option>
                            <option value="views">ì¡°íšŒìˆ˜ìˆœ</option>
                            <option value="name">ì´ë¦„ìˆœ</option>
                        </select>
                    </div>
                </div>
                <div id="allSharesList" class="space-y-3">
                    <!-- ë™ì  ìƒì„± -->
                </div>
                <div class="mt-4 text-center">
                    <button id="loadMoreBtn" onclick="loadMore()" class="px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition">
                        ë” ë³´ê¸°
                    </button>
                </div>
            </div>
        </div>

        <!-- ê°€ì´ë“œ ê´€ë¦¬ íƒ­ -->
        <div id="content-guides" class="hidden">
            <div class="space-y-6">
                <!-- ê²€ìƒ‰ ë° í•„í„° -->
                <div class="bg-white rounded-lg p-6 shadow-sm">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">ê°€ì´ë“œ ê²€ìƒ‰ ë° í•„í„°</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="text" id="guideLocationSearch" placeholder="ìœ„ì¹˜ ê²€ìƒ‰ (ì˜ˆ: ë² ë¥´ì‚¬ìœ , ì—í íƒ‘)" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                        <input type="text" id="guideTagsSearch" placeholder="íƒœê·¸ ê²€ìƒ‰ (ì‰¼í‘œ êµ¬ë¶„, ì˜ˆ: ê¶ì „,ì—­ì‚¬)" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none">
                    </div>
                    <div class="mt-4 flex gap-3">
                        <button onclick="searchGuides()" class="px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition">
                            ğŸ” ê²€ìƒ‰
                        </button>
                        <button onclick="resetGuideFilters()" class="px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition">
                            ì´ˆê¸°í™”
                        </button>
                        <span id="guideCount" class="ml-auto self-center text-sm text-gray-500">ì´ 0ê°œ</span>
                    </div>
                </div>

                <!-- ê°€ì´ë“œ ê·¸ë¦¬ë“œ -->
                <div class="bg-white rounded-lg p-6 shadow-sm">
                    <div class="flex flex-wrap justify-between items-center gap-3 mb-4">
                        <h2 class="text-lg font-semibold text-gray-900">ê°€ì´ë“œ ëª©ë¡</h2>
                        <div class="flex flex-wrap gap-2">
                            <button onclick="deleteAllGuides()" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition">
                                ğŸ—‘ï¸ ì „ì²´ ì‚­ì œ
                            </button>
                            <button id="createShareBtn" onclick="openCreateShareModal()" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                ì„ íƒí•œ ê°€ì´ë“œë¡œ ê³µìœ  í˜ì´ì§€ ë§Œë“¤ê¸° (<span id="selectedCount">0</span>)
                            </button>
                        </div>
                    </div>
                    <div id="guidesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- ë™ì  ìƒì„± -->
                    </div>
                    <div class="mt-4 text-center">
                        <button id="loadMoreGuidesBtn" onclick="loadMoreGuides()" class="px-6 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition">
                            ë” ë³´ê¸°
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìˆ˜ìµ íƒ­ -->
        <div id="content-revenue" class="hidden">
            <div class="space-y-6">
                <!-- ìˆ˜ìµ ìš”ì•½ ì¹´ë“œ -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="bg-white rounded-lg p-6 shadow-sm">
                        <h3 class="text-sm font-medium text-gray-500 mb-2">ì´ ìˆ˜ì…</h3>
                        <p id="revenue-total" class="text-3xl font-bold text-green-600">-</p>
                        <p class="text-xs text-gray-400 mt-1">EUR (10 EUR = 140 í¬ë ˆë”§)</p>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-sm">
                        <h3 class="text-sm font-medium text-gray-500 mb-2">AI ë¹„ìš© (ì¶”ì •)</h3>
                        <p id="revenue-ai-cost" class="text-3xl font-bold text-orange-500">-</p>
                        <p class="text-xs text-gray-400 mt-1">EUR (Gemini 2.5 Flash)</p>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-sm">
                        <h3 class="text-sm font-medium text-gray-500 mb-2">ê³ ì •ë¹„</h3>
                        <p id="revenue-fixed-cost" class="text-3xl font-bold text-gray-600">300 EUR</p>
                        <p class="text-xs text-gray-400 mt-1">ì›”ê°„ ì„œë²„/ì„œë¹„ìŠ¤ ë¹„ìš©</p>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-sm">
                        <h3 class="text-sm font-medium text-gray-500 mb-2">ìˆœìˆ˜ìµ</h3>
                        <p id="revenue-net" class="text-3xl font-bold">-</p>
                        <p class="text-xs text-gray-400 mt-1">ì´ìˆ˜ì… - AIë¹„ìš© - ê³ ì •ë¹„</p>
                    </div>
                </div>

                <!-- ì¶”ê°€ ì§€í‘œ -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-white rounded-lg p-6 shadow-sm">
                        <h3 class="text-sm font-medium text-gray-500 mb-2">ARPU (ê²°ì œìë‹¹ í‰ê· ìˆ˜ìµ)</h3>
                        <p id="revenue-arpu" class="text-2xl font-bold text-blue-600">-</p>
                        <p class="text-xs text-gray-400 mt-1" id="revenue-payers">ê²°ì œì: -ëª…</p>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-sm">
                        <h3 class="text-sm font-medium text-gray-500 mb-2">ì´ ê²°ì œ ê±´ìˆ˜</h3>
                        <p id="revenue-transactions" class="text-2xl font-bold text-purple-600">-</p>
                        <p class="text-xs text-gray-400 mt-1">Stripe ê²°ì œ</p>
                    </div>
                    <div class="bg-white rounded-lg p-6 shadow-sm">
                        <h3 class="text-sm font-medium text-gray-500 mb-2">ì´ AI í˜¸ì¶œ</h3>
                        <p id="revenue-ai-calls" class="text-2xl font-bold text-indigo-600">-</p>
                        <p class="text-xs text-gray-400 mt-1">ìƒì„¸í˜ì´ì§€ ìƒì„±</p>
                    </div>
                </div>

                <!-- í¬ë ˆë”§ í˜„í™© -->
                <div class="bg-white rounded-lg p-6 shadow-sm">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">í¬ë ˆë”§ í˜„í™©</h2>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div class="text-center p-4 bg-green-50 rounded-lg">
                            <p class="text-sm text-gray-500">íŒë§¤ í¬ë ˆë”§</p>
                            <p id="credit-sold" class="text-2xl font-bold text-green-600">-</p>
                        </div>
                        <div class="text-center p-4 bg-red-50 rounded-lg">
                            <p class="text-sm text-gray-500">ì‚¬ìš©ëœ í¬ë ˆë”§</p>
                            <p id="credit-used" class="text-2xl font-bold text-red-600">-</p>
                        </div>
                        <div class="text-center p-4 bg-blue-50 rounded-lg">
                            <p class="text-sm text-gray-500">ë³´ë„ˆìŠ¤ ì§€ê¸‰</p>
                            <p id="credit-bonus" class="text-2xl font-bold text-blue-600">-</p>
                        </div>
                        <div class="text-center p-4 bg-purple-50 rounded-lg">
                            <p class="text-sm text-gray-500">ìœ ì € ì”ì—¬ í¬ë ˆë”§</p>
                            <p id="credit-remaining" class="text-2xl font-bold text-purple-600">-</p>
                        </div>
                    </div>
                </div>

                <!-- ì›”ë³„ ì¶”ì´ -->
                <div class="bg-white rounded-lg p-6 shadow-sm">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">ì›”ë³„ ìˆ˜ìµ ì¶”ì´ (ìµœê·¼ 6ê°œì›”)</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b">
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-500">ì›”</th>
                                    <th class="text-right py-3 px-4 text-sm font-medium text-gray-500">ìˆ˜ì… (EUR)</th>
                                    <th class="text-right py-3 px-4 text-sm font-medium text-gray-500">AI ë¹„ìš© (EUR)</th>
                                    <th class="text-center py-3 px-4 text-sm font-medium text-gray-500">ê²°ì œ ê±´ìˆ˜</th>
                                    <th class="text-center py-3 px-4 text-sm font-medium text-gray-500">AI í˜¸ì¶œ</th>
                                </tr>
                            </thead>
                            <tbody id="monthlyTrendTable">
                                <!-- ë™ì  ìƒì„± -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ìµœê·¼ ê²°ì œ ë‚´ì—­ -->
                <div class="bg-white rounded-lg p-6 shadow-sm">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">ìµœê·¼ ê²°ì œ ë‚´ì—­</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b">
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-500">ë‚ ì§œ</th>
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-500">ì‚¬ìš©ì ID</th>
                                    <th class="text-right py-3 px-4 text-sm font-medium text-gray-500">í¬ë ˆë”§</th>
                                    <th class="text-right py-3 px-4 text-sm font-medium text-gray-500">ê¸ˆì•¡ (EUR)</th>
                                </tr>
                            </thead>
                            <tbody id="recentTransactionsTable">
                                <!-- ë™ì  ìƒì„± -->
                            </tbody>
                        </table>
                    </div>
                    <p id="no-transactions" class="text-center text-gray-500 py-8 hidden">ê²°ì œ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>

        <!-- í†µê³„ íƒ­ -->
        <div id="content-stats" class="hidden">
            <div class="space-y-6">
                <!-- ì¼ë³„ ì¶”ì´ -->
                <div class="bg-white rounded-lg p-6 shadow-sm">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">ì¼ë³„ í™œë™ ì¶”ì´ (ìµœê·¼ 7ì¼)</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b">
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-500">ë‚ ì§œ</th>
                                    <th class="text-center py-3 px-4 text-sm font-medium text-gray-500">ì‹ ê·œ ê°€ì…</th>
                                    <th class="text-center py-3 px-4 text-sm font-medium text-gray-500">AI í˜¸ì¶œ</th>
                                    <th class="text-center py-3 px-4 text-sm font-medium text-gray-500">ê³µìœ  ë§í¬</th>
                                </tr>
                            </thead>
                            <tbody id="dailyTrends">
                                <!-- ë™ì  ìƒì„± -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- ì‚¬ìš©ì í–‰ë™ -->
                <div class="bg-white rounded-lg p-6 shadow-sm">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">ì‚¬ìš©ì í–‰ë™</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- ë””ë°”ì´ìŠ¤ ë¶„í¬ -->
                        <div>
                            <h3 class="text-sm font-medium text-gray-500 mb-3">ë””ë°”ì´ìŠ¤ ë¶„í¬</h3>
                            <div id="deviceStats" class="space-y-2">
                                <!-- ë™ì  ìƒì„± -->
                            </div>
                        </div>
                        <!-- ë¸Œë¼ìš°ì € ë¶„í¬ -->
                        <div>
                            <h3 class="text-sm font-medium text-gray-500 mb-3">ë¸Œë¼ìš°ì € ë¶„í¬</h3>
                            <div id="browserStats" class="space-y-2">
                                <!-- ë™ì  ìƒì„± -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI ì„±ëŠ¥ -->
                <div class="bg-white rounded-lg p-6 shadow-sm">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">AI ì„±ëŠ¥</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div>
                            <h3 class="text-sm font-medium text-gray-500 mb-2">í‰ê·  ì‘ë‹µ ì‹œê°„</h3>
                            <p id="avgResponseTime" class="text-2xl font-bold text-gray-900">-</p>
                            <p class="text-xs text-gray-500 mt-1">ëª©í‘œ: 2-2.5ì´ˆ</p>
                        </div>
                        <div>
                            <h3 class="text-sm font-medium text-gray-500 mb-2">ì„±ê³µë¥ </h3>
                            <p id="successRate" class="text-2xl font-bold text-green-600">-</p>
                        </div>
                        <div>
                            <h3 class="text-sm font-medium text-gray-500 mb-2">ì—ëŸ¬ìœ¨</h3>
                            <p id="errorRate" class="text-2xl font-bold text-red-600">-</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìºì‹œë°± íƒ­ (2025-11-28 ë¦¬ì›Œë“œ ì‹œìŠ¤í…œ) -->
        <div id="content-cashback" class="hidden">
            <div class="space-y-6">
                <!-- ìºì‹œë°± í†µê³„ -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="stat-card bg-white rounded-lg p-6 shadow-sm">
                        <h3 class="text-sm font-medium text-gray-500 mb-2">ëŒ€ê¸° ì¤‘ì¸ ìš”ì²­</h3>
                        <p id="pendingCashback" class="text-3xl font-bold text-amber-600">-</p>
                    </div>
                    <div class="stat-card bg-white rounded-lg p-6 shadow-sm">
                        <h3 class="text-sm font-medium text-gray-500 mb-2">ìŠ¹ì¸ëœ ìš”ì²­</h3>
                        <p id="approvedCashback" class="text-3xl font-bold text-green-600">-</p>
                    </div>
                    <div class="stat-card bg-white rounded-lg p-6 shadow-sm">
                        <h3 class="text-sm font-medium text-gray-500 mb-2">ì´ ì§€ê¸‰ì•¡</h3>
                        <p id="totalCashbackAmount" class="text-3xl font-bold text-blue-600">-</p>
                    </div>
                </div>
                
                <!-- ìºì‹œë°± ìš”ì²­ ëª©ë¡ -->
                <div class="bg-white rounded-lg p-6 shadow-sm">
                    <h2 class="text-lg font-semibold text-gray-900 mb-4">ìºì‹œë°± ìš”ì²­ ëª©ë¡</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b bg-gray-50">
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-500">ìƒíƒœ</th>
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-500">ì‚¬ìš©ì</th>
                                    <th class="text-center py-3 px-4 text-sm font-medium text-gray-500">í¬ë ˆë”§</th>
                                    <th class="text-center py-3 px-4 text-sm font-medium text-gray-500">ê¸ˆì•¡</th>
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-500">ê²°ì œìˆ˜ë‹¨</th>
                                    <th class="text-left py-3 px-4 text-sm font-medium text-gray-500">ì‹ ì²­ì¼</th>
                                    <th class="text-center py-3 px-4 text-sm font-medium text-gray-500">ì•¡ì…˜</th>
                                </tr>
                            </thead>
                            <tbody id="cashbackList">
                                <tr>
                                    <td colspan="7" class="text-center py-8 text-gray-400">ë¡œë”© ì¤‘...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- í”„ë¡¬í”„íŠ¸ íƒ­ (2025-12-18 ì–¸ì–´ë³„ AI í”„ë¡¬í”„íŠ¸ ê´€ë¦¬) -->
        <div id="content-prompts" class="hidden">
            <div class="space-y-6">
                <!-- í”„ë¡¬í”„íŠ¸ ì‹œë”© ë²„íŠ¼ -->
                <div class="bg-white rounded-lg p-4 sm:p-6 shadow-sm border-l-4 border-blue-500">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-3">
                        <div>
                            <h2 class="text-lg font-semibold text-gray-800">ğŸ¯ ì–¸ì–´ë³„ AI í”„ë¡¬í”„íŠ¸ ê´€ë¦¬</h2>
                            <p class="text-sm text-gray-500 mt-1">7ê°œ ì–¸ì–´ Ã— 2ê°€ì§€ íƒ€ì… = 14ê°œ í”„ë¡¬í”„íŠ¸</p>
                        </div>
                        <button id="seedPromptsBtn" onclick="seedDefaultPrompts()" class="w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm">
                            ê¸°ë³¸ í”„ë¡¬í”„íŠ¸ ìƒì„±
                        </button>
                    </div>
                </div>
                
                <!-- í”„ë¡¬í”„íŠ¸ í•„í„° -->
                <div class="bg-white rounded-lg p-4 shadow-sm">
                    <div class="flex flex-wrap gap-3">
                        <div class="flex-1 min-w-[120px]">
                            <label class="block text-xs text-gray-500 mb-1">ì–¸ì–´</label>
                            <select id="promptLangFilter" onchange="filterPrompts()" class="w-full px-3 py-2 border rounded-lg text-sm">
                                <option value="all">ì „ì²´</option>
                                <option value="ko">í•œêµ­ì–´</option>
                                <option value="en">English</option>
                                <option value="zh-CN">ä¸­æ–‡</option>
                                <option value="ja">æ—¥æœ¬èª</option>
                                <option value="fr">FranÃ§ais</option>
                                <option value="de">Deutsch</option>
                                <option value="es">EspaÃ±ol</option>
                            </select>
                        </div>
                        <div class="flex-1 min-w-[120px]">
                            <label class="block text-xs text-gray-500 mb-1">íƒ€ì…</label>
                            <select id="promptTypeFilter" onchange="filterPrompts()" class="w-full px-3 py-2 border rounded-lg text-sm">
                                <option value="all">ì „ì²´</option>
                                <option value="image">ì´ë¯¸ì§€</option>
                                <option value="text">í…ìŠ¤íŠ¸</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- í”„ë¡¬í”„íŠ¸ ëª©ë¡ -->
                <div id="promptsList" class="space-y-4">
                    <p class="text-center text-gray-400 py-8">í”„ë¡¬í”„íŠ¸ ë¡œë”© ì¤‘...</p>
                </div>
            </div>
        </div>
        
        <!-- í”„ë¡¬í”„íŠ¸ í¸ì§‘ ëª¨ë‹¬ -->
        <div id="promptEditModal" class="hidden fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-hidden">
                <div class="p-4 border-b flex justify-between items-center">
                    <h3 class="text-lg font-semibold" id="promptEditTitle">í”„ë¡¬í”„íŠ¸ í¸ì§‘</h3>
                    <button onclick="closePromptModal()" class="text-gray-500 hover:text-gray-700">âœ•</button>
                </div>
                <div class="p-4 overflow-y-auto max-h-[60vh]">
                    <input type="hidden" id="promptEditLang" />
                    <input type="hidden" id="promptEditType" />
                    <textarea id="promptEditContent" class="w-full h-96 p-3 border rounded-lg text-sm font-mono leading-relaxed resize-y" placeholder="í”„ë¡¬í”„íŠ¸ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                    <p class="text-xs text-gray-400 mt-2">âš ï¸ ì£¼ì˜: [ì¤‘ìš”] í…ìŠ¤íŠ¸ë¡œë§Œ ì‘ë‹µ ê·œì¹™ì„ í•­ìƒ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤.</p>
                </div>
                <div class="p-4 border-t flex justify-end gap-2">
                    <button onclick="closePromptModal()" class="px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg">ì·¨ì†Œ</button>
                    <button onclick="savePrompt()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">ì €ì¥</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentTab = 'overview';
        let allPrompts = [];
        let allShares = [];
        let displayedShares = 0;
        const SHARES_PER_PAGE = 20;

        // ë‚ ì§œ+ì‹œê°„ í¬ë§· í•¨ìˆ˜
        function formatDateTime(dateStr) {
            if (!dateStr) return '-';
            try {
                const date = new Date(dateStr);
                if (isNaN(date.getTime())) return '-';
                return date.toLocaleString('ko-KR', { 
                    month: 'short', 
                    day: 'numeric', 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
            } catch (e) {
                return '-';
            }
        }

        // íƒ­ ì „í™˜
        function showTab(tab) {
            currentTab = tab;
            
            // ëª¨ë“  íƒ­ ìˆ¨ê¸°ê¸°
            ['overview', 'content', 'guides', 'revenue', 'stats', 'cashback', 'prompts'].forEach(t => {
                document.getElementById(`content-${t}`).classList.add('hidden');
                document.getElementById(`tab-${t}`).classList.remove('active');
                document.getElementById(`tab-${t}`).classList.add('text-gray-500');
                document.getElementById(`tab-${t}`).classList.remove('text-gray-700');
            });
            
            // ì„ íƒëœ íƒ­ í‘œì‹œ
            document.getElementById(`content-${tab}`).classList.remove('hidden');
            document.getElementById(`tab-${tab}`).classList.add('active');
            document.getElementById(`tab-${tab}`).classList.remove('text-gray-500');
            document.getElementById(`tab-${tab}`).classList.add('text-gray-700');
            
            // íƒ­ë³„ ë°ì´í„° ë¡œë“œ
            if (tab === 'content') {
                loadAdminData();
            } else if (tab === 'guides') {
                searchGuides();
                loadCurrentFeatured();
            } else if (tab === 'revenue') {
                loadRevenueData();
            } else if (tab === 'stats') {
                loadStats();
            } else if (tab === 'cashback') {
                loadCashbackRequests();
            } else if (tab === 'prompts') {
                loadPrompts();
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ’° ìˆ˜ìµ ëŒ€ì‹œë³´ë“œ í•¨ìˆ˜
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function loadRevenueData() {
            try {
                const response = await fetch('/api/admin/revenue', {
                    credentials: 'include'
                });
                
                if (!response.ok) throw new Error('ìˆ˜ìµ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
                
                const data = await response.json();
                
                // ìš”ì•½ ì¹´ë“œ ì—…ë°ì´íŠ¸
                document.getElementById('revenue-total').textContent = `${data.summary.totalRevenue} EUR`;
                document.getElementById('revenue-ai-cost').textContent = `${data.summary.totalAICost} EUR`;
                document.getElementById('revenue-fixed-cost').textContent = `${data.summary.fixedCost} EUR`;
                
                // ìˆœìˆ˜ìµ ìƒ‰ìƒ ì„¤ì •
                const netEl = document.getElementById('revenue-net');
                netEl.textContent = `${data.summary.netProfit} EUR`;
                if (data.summary.netProfit >= 0) {
                    netEl.classList.remove('text-red-600');
                    netEl.classList.add('text-green-600');
                } else {
                    netEl.classList.remove('text-green-600');
                    netEl.classList.add('text-red-600');
                }
                
                // ì¶”ê°€ ì§€í‘œ
                document.getElementById('revenue-arpu').textContent = `${data.summary.arpu} EUR`;
                document.getElementById('revenue-payers').textContent = `ê²°ì œì: ${data.summary.uniquePayers}ëª…`;
                document.getElementById('revenue-transactions').textContent = data.summary.totalTransactions;
                document.getElementById('revenue-ai-calls').textContent = data.summary.totalAICalls;
                
                // í¬ë ˆë”§ í˜„í™©
                document.getElementById('credit-sold').textContent = data.creditStats.sold.toLocaleString();
                document.getElementById('credit-used').textContent = data.creditStats.used.toLocaleString();
                document.getElementById('credit-bonus').textContent = data.creditStats.bonusGiven.toLocaleString();
                document.getElementById('credit-remaining').textContent = data.creditStats.remaining.toLocaleString();
                
                // ì›”ë³„ ì¶”ì´ í…Œì´ë¸”
                const trendTable = document.getElementById('monthlyTrendTable');
                trendTable.innerHTML = data.monthlyTrend.map(m => `
                    <tr class="border-b hover:bg-gray-50">
                        <td class="py-3 px-4 font-medium">${m.month}</td>
                        <td class="py-3 px-4 text-right text-green-600">${m.revenue} EUR</td>
                        <td class="py-3 px-4 text-right text-orange-500">${m.aiCost} EUR</td>
                        <td class="py-3 px-4 text-center">${m.transactions}</td>
                        <td class="py-3 px-4 text-center">${m.aiCalls}</td>
                    </tr>
                `).join('');
                
                // ìµœê·¼ ê²°ì œ ë‚´ì—­ í…Œì´ë¸”
                const txTable = document.getElementById('recentTransactionsTable');
                const noTxMsg = document.getElementById('no-transactions');
                
                if (data.recentTransactions.length === 0) {
                    txTable.innerHTML = '';
                    noTxMsg.classList.remove('hidden');
                } else {
                    noTxMsg.classList.add('hidden');
                    txTable.innerHTML = data.recentTransactions.map(tx => `
                        <tr class="border-b hover:bg-gray-50">
                            <td class="py-3 px-4">${formatDateTime(tx.createdAt)}</td>
                            <td class="py-3 px-4 text-sm text-gray-600">${tx.userId.substring(0, 20)}...</td>
                            <td class="py-3 px-4 text-right font-medium text-green-600">+${tx.amount}</td>
                            <td class="py-3 px-4 text-right font-medium">${tx.amountEUR} EUR</td>
                        </tr>
                    `).join('');
                }
                
            } catch (error) {
                console.error('ìˆ˜ìµ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // Featured ê°¤ëŸ¬ë¦¬ ê´€ë¦¬ í•¨ìˆ˜ë“¤ (from index.js)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function loadAdminData() {
            await loadFeaturedList();
            await loadAllShares(); // ì „ì²´ ê³µìœ  ëª©ë¡ë„ ë¡œë“œ
            
            // ê²€ìƒ‰ì°½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
            const searchInput = document.getElementById('shareSearchInput');
            if (searchInput && !searchInput.dataset.listenerAdded) {
                searchInput.dataset.listenerAdded = 'true';
                let searchTimeout;
                searchInput.addEventListener('input', (e) => {
                    clearTimeout(searchTimeout);
                    searchTimeout = setTimeout(() => {
                        searchShares(e.target.value);
                    }, 300); // 300ms ë””ë°”ìš´ìŠ¤
                });
            }
        }

        async function searchShares(query) {
            const resultsContainer = document.getElementById('searchResults');
            if (!resultsContainer) return;

            if (!query || query.trim().length === 0) {
                resultsContainer.innerHTML = '<p class="text-sm text-gray-400 text-center py-4">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>';
                return;
            }

            try {
                resultsContainer.innerHTML = '<p class="text-sm text-gray-400 text-center py-4">ê²€ìƒ‰ ì¤‘...</p>';
                
                const response = await fetch(`/api/admin/all-shares?search=${encodeURIComponent(query)}`, {
                    credentials: 'include'
                });
                
                if (!response.ok) throw new Error('ê²€ìƒ‰ ì‹¤íŒ¨');
                
                const shares = await response.json();
                
                if (!shares || shares.length === 0) {
                    resultsContainer.innerHTML = `
                        <p class="text-sm text-gray-400 text-center py-4">
                            "<span class="font-semibold">${query}</span>" ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤
                        </p>
                    `;
                    return;
                }
                
                resultsContainer.innerHTML = shares.map(share => `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:border-yellow-400 transition-colors">
                        <div class="flex-1 min-w-0">
                            <p class="font-medium text-gray-900 truncate">${share.name}</p>
                            <div class="flex items-center gap-3 mt-1">
                                <span class="text-xs text-gray-500">ğŸ“¥ ${share.downloadCount || 0}íšŒ</span>
                                <span class="text-xs text-gray-400">${formatDateTime(share.created_at || share.createdAt)}</span>
                                ${share.featured ? '<span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded">â­ Featured</span>' : ''}
                            </div>
                        </div>
                        ${!share.featured ? `
                            <button 
                                onclick="addFeaturedById('${share.id}')" 
                                class="ml-3 px-3 py-1.5 bg-yellow-500 text-white text-sm font-medium rounded hover:bg-yellow-600 transition-colors whitespace-nowrap"
                                data-testid="button-add-featured-${share.id}">
                                â­ ì¶”ê°€
                            </button>
                        ` : `
                            <span class="ml-3 px-3 py-1.5 bg-gray-200 text-gray-500 text-sm font-medium rounded cursor-not-allowed whitespace-nowrap">
                                ì´ë¯¸ ì¶”ê°€ë¨
                            </span>
                        `}
                    </div>
                `).join('');
                
            } catch (error) {
                console.error('ê³µìœ  í˜ì´ì§€ ê²€ìƒ‰ ì˜¤ë¥˜:', error);
                resultsContainer.innerHTML = '<p class="text-sm text-red-400 text-center py-4">ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</p>';
            }
        }

        async function loadFeaturedList() {
            try {
                const response = await fetch('/api/admin/featured', {
                    credentials: 'include'
                });
                if (!response.ok) throw new Error('Failed to load featured');
                
                const featured = await response.json();
                
                const list = document.getElementById('featuredList');
                const count = document.getElementById('featuredCount');
                
                if (count) count.textContent = featured.length;
                
                if (!list) return;
                
                if (!featured || featured.length === 0) {
                    list.innerHTML = '<p class="text-sm text-gray-400">Featured í˜ì´ì§€ê°€ ì—†ìŠµë‹ˆë‹¤</p>';
                    return;
                }
                
                list.innerHTML = featured.map(page => `
                    <div class="flex items-center justify-between p-2 bg-yellow-50 rounded">
                        <span class="text-sm font-medium text-gray-800">${page.name}</span>
                        <div class="flex items-center gap-2">
                            <button onclick="editFeatured('${page.id}')" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                                âœï¸ í¸ì§‘
                            </button>
                            <button onclick="removeFeatured('${page.id}')" class="text-red-500 hover:text-red-700 text-sm font-medium">
                                âœ• ì œê±°
                            </button>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Featured ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
                const list = document.getElementById('featuredList');
                if (list) list.innerHTML = '<p class="text-sm text-red-400">ë¡œë“œ ì‹¤íŒ¨</p>';
            }
        }

        window.addFeaturedById = async function(shareId) {
            if (!shareId) {
                alert('ê³µìœ  í˜ì´ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”');
                return;
            }
            
            try {
                const response = await fetch(`/api/admin/featured/${shareId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include'
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    alert('â­ Featuredì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    await loadFeaturedList();
                    // ê²€ìƒ‰ ê²°ê³¼ ë‹¤ì‹œ ë¡œë“œí•´ì„œ "ì´ë¯¸ ì¶”ê°€ë¨" í‘œì‹œ
                    const searchInput = document.getElementById('shareSearchInput');
                    if (searchInput && searchInput.value) {
                        await searchShares(searchInput.value);
                    }
                } else {
                    alert(data.error || 'Featured ì¶”ê°€ ì‹¤íŒ¨');
                }
            } catch (error) {
                console.error('Featured ì¶”ê°€ ì˜¤ë¥˜:', error);
                alert('Featured ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ');
            }
        };

        window.removeFeatured = async function(shareId) {
            if (!confirm('Featuredì—ì„œ ì œê±°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                const response = await fetch(`/api/admin/featured/${shareId}`, {
                    method: 'DELETE',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include'
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    alert('Featuredì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤');
                    await loadFeaturedList();
                } else {
                    alert(data.error || 'Featured ì œê±° ì‹¤íŒ¨');
                }
            } catch (error) {
                console.error('Featured ì œê±° ì˜¤ë¥˜:', error);
                alert('Featured ì œê±° ì¤‘ ì˜¤ë¥˜ ë°œìƒ');
            }
        };

        // Featured í¸ì§‘ ëª¨ë‹¬
        window.editFeatured = async function(id) {
            try {
                // 1. ê´€ë¦¬ììš© APIë¡œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const res = await fetch(`/api/admin/featured/${id}/data`, {
                    credentials: 'include'
                });
                if (!res.ok) {
                    const errorData = await res.json();
                    throw new Error(errorData.error || 'ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
                }
                const data = await res.json();
                const { page, guides } = data;
                
                console.log('ğŸ“Š í¸ì§‘ ë°ì´í„°:', { page, guides, guidesCount: guides?.length });
                
                // 2. ëª¨ë‹¬ ì…ë ¥ í•„ë“œ ì±„ìš°ê¸°
                document.getElementById('editTitle').value = page.name || '';
                document.getElementById('editSender').value = page.sender || 'ì—¬í–‰ì';
                document.getElementById('editLocation').value = page.location || 'ë¯¸ì§€ì •';
                document.getElementById('editDate').value = page.date || new Date(page.createdAt).toISOString().split('T')[0];
                
                // 3. ë“œë˜ê·¸ ì•¤ ë“œë¡­ ê°€ì´ë“œ ë¦¬ìŠ¤íŠ¸ ìƒì„± (ëª¨ë°”ì¼ í„°ì¹˜ + PC ë§ˆìš°ìŠ¤)
                const guideListHtml = guides.map((guide, index) => {
                    const imgSrc = guide.imageUrl || '';
                    return `
                        <div class="guide-item flex items-center gap-3 p-3 bg-white rounded-lg border-2 border-gray-300 mb-2 cursor-grab active:cursor-grabbing select-none transition-all" 
                             data-guide-id="${guide.id}"
                             draggable="true">
                            <div class="drag-handle text-gray-400 text-2xl px-1" style="touch-action: none;">â˜°</div>
                            <img src="${imgSrc}" alt="ê°€ì´ë“œ ${index + 1}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 8px; flex-shrink: 0;">
                            <span class="guide-number font-medium text-gray-700 flex-1">ê°€ì´ë“œ ${index + 1}</span>
                        </div>
                    `;
                }).join('');
                
                // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ë²¤íŠ¸ ì„¤ì •
                setTimeout(() => initDragAndDrop(), 100);
                
                document.getElementById('guideList').innerHTML = guideListHtml;
                
                // 5. ëª¨ë‹¬ í‘œì‹œ
                document.getElementById('editFeaturedModal').classList.remove('hidden');
                
                // 6. ì €ì¥ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
                document.getElementById('saveFeaturedBtn').onclick = async () => {
                    const title = document.getElementById('editTitle').value;
                    const sender = document.getElementById('editSender').value;
                    const location = document.getElementById('editLocation').value;
                    const date = document.getElementById('editDate').value;
                    
                    if (!title || !sender || !location || !date) {
                        alert('âŒ ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                        return;
                    }
                    
                    // ê°€ì´ë“œ ìˆœì„œ ê°€ì ¸ì˜¤ê¸° (UUID ë¬¸ìì—´ë¡œ ìœ ì§€)
                    const guideItems = document.querySelectorAll('.guide-item');
                    const newGuideIds = Array.from(guideItems).map(item => item.dataset.guideId);
                    
                    try {
                        const response = await fetch(`/api/admin/shares/${id}`, {
                            method: 'PUT',
                            headers: { 'Content-Type': 'application/json' },
                            credentials: 'include',
                            body: JSON.stringify({
                                title,
                                sender,
                                location,
                                date,
                                guideIds: newGuideIds
                            })
                        });
                        
                        if (!response.ok) {
                            const errorData = await response.json();
                            throw new Error(errorData.error || 'í¸ì§‘ ì‹¤íŒ¨');
                        }
                        
                        const result = await response.json();
                        alert('âœ… ' + result.message);
                        closeEditModal();
                        loadFeaturedList();
                    } catch (error) {
                        console.error('Featured í¸ì§‘ ì˜¤ë¥˜:', error);
                        alert('âŒ í¸ì§‘ ì‹¤íŒ¨: ' + error.message);
                    }
                };
            } catch (error) {
                console.error('Featured í¸ì§‘ ì˜¤ë¥˜:', error);
                alert('âŒ í¸ì§‘ ì‹¤íŒ¨: ' + error.message);
            }
        };

        // ëª¨ë‹¬ ë‹«ê¸°
        window.closeEditModal = function() {
            document.getElementById('editFeaturedModal').classList.add('hidden');
        };

        // ê°€ì´ë“œ ìœ„ë¡œ ì´ë™ (ëª¨ë°”ì¼ ì¹œí™”ì )
        window.moveGuideUp = function(button) {
            const item = button.closest('.guide-item');
            const prev = item.previousElementSibling;
            if (prev) {
                item.parentNode.insertBefore(item, prev);
                updateGuideNumbers();
            }
        };

        // ê°€ì´ë“œ ì•„ë˜ë¡œ ì´ë™ (ëª¨ë°”ì¼ ì¹œí™”ì )
        window.moveGuideDown = function(button) {
            const item = button.closest('.guide-item');
            const next = item.nextElementSibling;
            if (next) {
                item.parentNode.insertBefore(next, item);
                updateGuideNumbers();
            }
        };

        // ê°€ì´ë“œ ë²ˆí˜¸ ì—…ë°ì´íŠ¸
        function updateGuideNumbers() {
            const items = document.querySelectorAll('.guide-item');
            items.forEach((item, index) => {
                const label = item.querySelector('.guide-number');
                if (label) label.textContent = `ê°€ì´ë“œ ${index + 1}`;
            });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ (ëª¨ë°”ì¼ í„°ì¹˜ + PC ë§ˆìš°ìŠ¤)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let draggedItem = null;
        let touchStartY = 0;
        let touchCurrentY = 0;
        let placeholder = null;

        function initDragAndDrop() {
            const guideList = document.getElementById('guideList');
            if (!guideList) return;

            const items = guideList.querySelectorAll('.guide-item');
            
            items.forEach(item => {
                // PC: ë§ˆìš°ìŠ¤ ë“œë˜ê·¸
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('dragend', handleDragEnd);
                item.addEventListener('dragover', handleDragOver);
                item.addEventListener('drop', handleDrop);
                
                // ëª¨ë°”ì¼: í„°ì¹˜ ë“œë˜ê·¸
                item.addEventListener('touchstart', handleTouchStart, { passive: false });
                item.addEventListener('touchmove', handleTouchMove, { passive: false });
                item.addEventListener('touchend', handleTouchEnd);
            });
        }

        // PC ë“œë˜ê·¸ ì´ë²¤íŠ¸
        function handleDragStart(e) {
            draggedItem = this;
            this.style.opacity = '0.5';
            this.style.border = '2px dashed #4285F4';
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            this.style.opacity = '1';
            this.style.border = '2px solid #d1d5db';
            draggedItem = null;
            updateGuideNumbers();
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            
            if (draggedItem && draggedItem !== this) {
                const rect = this.getBoundingClientRect();
                const midY = rect.top + rect.height / 2;
                
                if (e.clientY < midY) {
                    this.parentNode.insertBefore(draggedItem, this);
                } else {
                    this.parentNode.insertBefore(draggedItem, this.nextSibling);
                }
            }
        }

        function handleDrop(e) {
            e.preventDefault();
            updateGuideNumbers();
        }

        // ëª¨ë°”ì¼ í„°ì¹˜ ì´ë²¤íŠ¸
        function handleTouchStart(e) {
            if (e.target.closest('.drag-handle')) {
                e.preventDefault();
                draggedItem = this;
                touchStartY = e.touches[0].clientY;
                
                this.style.opacity = '0.7';
                this.style.transform = 'scale(1.02)';
                this.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
                this.style.zIndex = '1000';
            }
        }

        function handleTouchMove(e) {
            if (!draggedItem) return;
            e.preventDefault();
            
            touchCurrentY = e.touches[0].clientY;
            const guideList = document.getElementById('guideList');
            const items = Array.from(guideList.querySelectorAll('.guide-item'));
            
            items.forEach(item => {
                if (item === draggedItem) return;
                
                const rect = item.getBoundingClientRect();
                const midY = rect.top + rect.height / 2;
                
                if (touchCurrentY < midY && touchCurrentY > rect.top) {
                    guideList.insertBefore(draggedItem, item);
                } else if (touchCurrentY > midY && touchCurrentY < rect.bottom) {
                    guideList.insertBefore(draggedItem, item.nextSibling);
                }
            });
        }

        function handleTouchEnd(e) {
            if (!draggedItem) return;
            
            draggedItem.style.opacity = '1';
            draggedItem.style.transform = '';
            draggedItem.style.boxShadow = '';
            draggedItem.style.zIndex = '';
            
            draggedItem = null;
            updateGuideNumbers();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // âš ï¸ profile.html ë³µë¶™ (2025-12-15)
        // admin-dashboard.htmlìš©: adminDetailPage ê°ì²´
        // race condition ë°©ì§€: synth.cancel() + renderId íŒ¨í„´
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const adminDetailPage = {
            _isInitialized: false,
            
            _state: {
                isTextVisible: true,
                synth: null,
                voices: [],
                currentUtterance: null,
                originalText: '',
                onClose: null,
                translationComplete: true,
                translationObserver: null,
                voiceConfigsCache: null,
                voiceConfigsLoading: false,
                currentGuideData: null,
                renderId: 0,
                savedVoiceLang: null,
                savedVoiceName: null
            },
            
            _defaultVoicePriorities: {
                'ko-KR': { default: ['Microsoft Heami', 'Yuna'] },
                'en-US': { default: ['Samantha', 'Microsoft Zira', 'Google US English', 'English'] },
                'ja-JP': { default: ['Kyoko', 'Microsoft Haruka', 'Google æ—¥æœ¬èª', 'Japanese'] },
                'zh-CN': { default: ['Ting-Ting', 'Microsoft Huihui', 'Google æ™®é€šè¯', 'Chinese'] },
                'fr-FR': { default: ['Thomas', 'Microsoft Hortense', 'Google franÃ§ais', 'French'] },
                'de-DE': { default: ['Anna', 'Microsoft Hedda', 'Google Deutsch', 'German'] },
                'es-ES': { default: ['Monica', 'Microsoft Helena', 'Google espaÃ±ol', 'Spanish'] }
            },

            init: function(options = {}) {
                if (this._isInitialized) {
                    console.log('[AdminDetailPage] ì´ë¯¸ ì´ˆê¸°í™”ë¨, ìŠ¤í‚µ');
                    return;
                }
                this._isInitialized = true;
                
                const self = this;
                this._state.synth = window.speechSynthesis;
                this._state.onClose = options.onClose || null;

                this._els = {
                    page: document.getElementById('adminDetailPage'),
                    image: document.getElementById('adminDetailImage'),
                    description: document.getElementById('adminDetailDescription'),
                    locationInfo: document.getElementById('adminDetailLocationInfo'),
                    locationName: document.getElementById('adminDetailLocationName'),
                    voiceQueryInfo: document.getElementById('adminDetailVoiceQueryInfo'),
                    voiceQueryText: document.getElementById('adminDetailVoiceQueryText'),
                    textOverlay: document.getElementById('adminDetailTextOverlay'),
                    audioBtn: document.getElementById('adminDetailAudioBtn'),
                    textToggleBtn: document.getElementById('adminDetailTextToggleBtn'),
                    backBtn: document.getElementById('adminDetailBackBtn')
                };

                this._populateVoiceList();
                if (speechSynthesis.onvoiceschanged !== undefined) {
                    speechSynthesis.onvoiceschanged = () => self._populateVoiceList();
                }

                this._loadVoiceConfigsFromDB();

                this._els.backBtn.addEventListener('click', () => self.close());
                this._els.audioBtn.addEventListener('click', () => self._toggleAudio());
                this._els.textToggleBtn.addEventListener('click', () => { self._stopAudio(); self._toggleText(); });

                this._initTranslationWatcher();
                console.log('[AdminDetailPage] Initialized');
            },
            
            _loadVoiceConfigsFromDB: async function() {
                if (this._state.voiceConfigsCache) return this._state.voiceConfigsCache;
                if (this._state.voiceConfigsLoading) {
                    await new Promise(resolve => setTimeout(resolve, 500));
                    return this._state.voiceConfigsCache || null;
                }
                
                this._state.voiceConfigsLoading = true;
                try {
                    const response = await fetch('/api/voice-configs');
                    if (response.ok) {
                        const configs = await response.json();
                        this._state.voiceConfigsCache = {};
                        for (const config of configs) {
                            if (!this._state.voiceConfigsCache[config.langCode]) {
                                this._state.voiceConfigsCache[config.langCode] = {};
                            }
                            this._state.voiceConfigsCache[config.langCode][config.platform] = {
                                priorities: config.voicePriorities,
                                excludeVoices: config.excludeVoices || []
                            };
                        }
                        console.log('ğŸ”Š [AdminDetailPage Voice DB] ì„¤ì • ë¡œë“œ ì™„ë£Œ:', Object.keys(this._state.voiceConfigsCache));
                    }
                } catch (error) {
                    console.warn('ğŸ”Š [AdminDetailPage Voice DB] ë¡œë“œ ì‹¤íŒ¨, ê¸°ë³¸ê°’ ì‚¬ìš©:', error.message);
                }
                this._state.voiceConfigsLoading = false;
                return this._state.voiceConfigsCache;
            },
            
            _detectPlatform: function() {
                const ua = navigator.userAgent;
                if (/iPhone|iPad|iPod|Mac/.test(ua)) return 'ios';
                if (/Android/.test(ua)) return 'android';
                if (/Windows/.test(ua)) return 'windows';
                return 'default';
            },
            
            _getVoicePriorityFromDB: function(langCode) {
                const platform = this._detectPlatform();
                
                if (this._state.voiceConfigsCache && this._state.voiceConfigsCache[langCode]) {
                    const config = this._state.voiceConfigsCache[langCode][platform] || this._state.voiceConfigsCache[langCode]['default'];
                    if (config) {
                        return { priorities: config.priorities, excludeVoices: config.excludeVoices };
                    }
                }
                
                const fallback = this._defaultVoicePriorities[langCode];
                if (fallback) {
                    const priorities = fallback[platform] || fallback['default'] || fallback[Object.keys(fallback)[0]];
                    return { priorities, excludeVoices: [] };
                }
                
                return { priorities: [], excludeVoices: [] };
            },
            
            // ğŸŒ 2025-12-24: ë™ì  ì½˜í…ì¸  ê°•ì œ ì¬ë²ˆì—­
            _retranslationPending: false,
            
            _retranslateNewContent: function() {
                const self = this;
                // ğŸŒ 2025-12-24: userLang ì²´í¬ ì œê±° - Google Translate ë“œë¡­ë‹¤ìš´ í™œì„±í™” ì—¬ë¶€ë§Œ í™•ì¸
                return new Promise((resolve) => {
                    const selectElement = document.querySelector('.goog-te-combo');
                    
                    if (!selectElement || !selectElement.value) {
                        console.log('[AdminDetailPage Retranslate] Google Translate ë“œë¡­ë‹¤ìš´ ë¹„í™œì„± - ìŠ¤í‚µ');
                        resolve();
                        return;
                    }
                    
                    const currentLang = selectElement.value;
                    console.log('[AdminDetailPage Retranslate] ğŸ”„ ê°•ì œ ì¬ë²ˆì—­ ì‹œì‘:', currentLang);
                    self._retranslationPending = true;
                    
                    selectElement.value = '';
                    selectElement.dispatchEvent(new Event('change'));
                    
                    setTimeout(() => {
                        selectElement.value = currentLang;
                        selectElement.dispatchEvent(new Event('change'));
                        
                        setTimeout(() => {
                            console.log('[AdminDetailPage Retranslate] âœ… ì¬ë²ˆì—­ ì™„ë£Œ');
                            self._retranslationPending = false;
                            window.dispatchEvent(new CustomEvent('adminRetranslationComplete'));
                            resolve();
                        }, 800);
                    }, 100);
                });
            },

            _initTranslationWatcher: function() {
                const self = this;
                const userLang = localStorage.getItem('appLanguage') || 'ko';
                
                if (userLang === 'ko') {
                    this._state.translationComplete = true;
                    return;
                }
                
                const hasTranslateClass = document.body.classList.contains('translated-ltr') || 
                                          document.body.classList.contains('translated-rtl');
                if (hasTranslateClass) {
                    this._state.translationComplete = true;
                    return;
                }
                
                this._state.translationComplete = false;
                
                this._state.translationObserver = new MutationObserver(function(mutations) {
                    const hasTranslated = document.body.classList.contains('translated-ltr') || 
                                          document.body.classList.contains('translated-rtl');
                    if (hasTranslated) {
                        self._state.translationComplete = true;
                        self._state.translationObserver.disconnect();
                        window.dispatchEvent(new CustomEvent('adminTranslationComplete'));
                    }
                });
                
                this._state.translationObserver.observe(document.body, { 
                    attributes: true, 
                    attributeFilter: ['class'] 
                });
                
                setTimeout(function() {
                    if (!self._state.translationComplete) {
                        self._state.translationComplete = true;
                        if (self._state.translationObserver) {
                            self._state.translationObserver.disconnect();
                        }
                        window.dispatchEvent(new CustomEvent('adminTranslationComplete', { detail: { timeout: true } }));
                    }
                }, 3000);
            },

            _populateVoiceList: function() {
                this._state.voices = this._state.synth.getVoices();
            },
            
            _getVoiceForLanguage: function(userLang) {
                const langMap = {
                    'ko': 'ko-KR', 'en': 'en-US', 'ja': 'ja-JP', 'zh-CN': 'zh-CN',
                    'fr': 'fr-FR', 'de': 'de-DE', 'es': 'es-ES'
                };
                
                const fullLang = langMap[userLang] || 'ko-KR';
                const langCode = fullLang.substring(0, 2);
                
                const voiceConfig = this._getVoicePriorityFromDB(fullLang);
                const priorities = voiceConfig.priorities;
                const excludeVoices = voiceConfig.excludeVoices;
                
                const allVoices = this._state.voices;
                let targetVoice = null;
                
                for (const voiceName of priorities) {
                    targetVoice = allVoices.find(v => 
                        v.name.includes(voiceName) && !excludeVoices.some(ex => v.name.includes(ex))
                    );
                    if (targetVoice) break;
                }
                
                if (!targetVoice) {
                    targetVoice = allVoices.find(v => 
                        v.lang.replace('_', '-').startsWith(langCode) && !excludeVoices.some(ex => v.name.includes(ex))
                    );
                }
                
                return targetVoice || allVoices[0];
            },

            // ë°ì´í„°ë¡œ ì§ì ‘ ì—´ê¸° (guideId ëŒ€ì‹  guide ê°ì²´ ì „ë‹¬)
            openWithData: function(guide) {
                // ğŸ”’ ê°•ì œ ì´ˆê¸°í™” - ì´ì „ ìŒì„±/ë°ì´í„° ì™„ì „ ì •ë¦¬
                if (this._state.synth) {
                    this._state.synth.cancel();
                }
                this._stopAudio();
                
                // ìƒíƒœ ì´ˆê¸°í™”
                this._state.currentGuideData = null;
                this._state.savedVoiceLang = null;
                this._state.savedVoiceName = null;
                this._state.originalText = '';
                this._state.currentUtterance = null;
                
                // ë Œë” ID ì¦ê°€ - ì´ì „ ì½œë°± ë¬´íš¨í™”
                this._state.renderId++;
                const thisRenderId = this._state.renderId;
                
                console.log('[AdminDetailPage] openWithData() renderId:', thisRenderId);
                
                this._show();
                this._state.currentGuideData = guide;
                this._render(guide, thisRenderId);
            },

            _render: function(guide, renderId) {
                const isVoiceGuide = (!guide.imageUrl && !guide.imageDataUrl) && (guide.voiceQuery || guide.title);
                const imageUrl = guide.imageUrl || guide.imageDataUrl || '/images/landing-logo.jpg';
                this._els.image.src = imageUrl;
                
                if (!guide.imageUrl && !guide.imageDataUrl) {
                    this._els.image.style.filter = 'blur(8px) brightness(0.7)';
                    this._els.image.style.transform = 'scale(1.1)';
                } else {
                    this._els.image.style.filter = '';
                    this._els.image.style.transform = '';
                }
                
                this._els.description.textContent = guide.description || 'ë‚´ìš© ì—†ìŒ';
                
                if (isVoiceGuide) {
                    this._els.locationInfo.classList.add('hidden');
                    if (this._els.voiceQueryInfo && this._els.voiceQueryText) {
                        this._els.voiceQueryText.textContent = guide.voiceQuery || guide.title || '';
                        this._els.voiceQueryInfo.classList.remove('hidden');
                    }
                } else {
                    if (this._els.voiceQueryInfo) {
                        this._els.voiceQueryInfo.classList.add('hidden');
                    }
                    if (guide.locationName) {
                        this._els.locationName.textContent = guide.locationName;
                        this._els.locationInfo.classList.remove('hidden');
                    } else {
                        this._els.locationInfo.classList.add('hidden');
                    }
                }

                this._state.savedVoiceLang = guide.voiceLang || null;
                this._state.savedVoiceName = guide.voiceName || null;

                // ğŸŒ 2025-12-24: ë™ì  ì½˜í…ì¸  ì¬ë²ˆì—­ í›„ TTS ì¬ìƒ
                this._retranslateNewContent().then(() => {
                    if (guide.description) {
                        this._playAudio(guide.description, guide.voiceLang, guide.voiceName, renderId);
                    }
                });
            },

            _show: function() {
                this._els.page.classList.remove('hidden');
                document.documentElement.style.overflow = 'hidden';
                document.body.style.overflow = 'hidden';
                this._refreshTranslationState();
            },
            
            _refreshTranslationState: function() {
                const self = this;
                const userLang = localStorage.getItem('appLanguage') || 'ko';
                
                if (userLang === 'ko') {
                    this._state.translationComplete = true;
                    return;
                }
                
                const hasTranslateClass = document.body.classList.contains('translated-ltr') || 
                                          document.body.classList.contains('translated-rtl');
                if (hasTranslateClass) {
                    this._state.translationComplete = true;
                    return;
                }
                
                this._state.translationComplete = false;
                
                if (this._state.translationObserver) {
                    this._state.translationObserver.disconnect();
                }
                
                this._state.translationObserver = new MutationObserver(function(mutations) {
                    const hasTranslated = document.body.classList.contains('translated-ltr') || 
                                          document.body.classList.contains('translated-rtl');
                    if (hasTranslated) {
                        self._state.translationComplete = true;
                        self._state.translationObserver.disconnect();
                        window.dispatchEvent(new CustomEvent('adminTranslationComplete'));
                    }
                });
                
                this._state.translationObserver.observe(document.body, { 
                    attributes: true, 
                    attributeFilter: ['class'] 
                });
            },

            close: function() {
                this._stopAudio();
                this._els.page.classList.add('hidden');
                document.documentElement.style.overflow = '';
                document.body.style.overflow = '';
                
                if (this._state.onClose) {
                    this._state.onClose();
                }
            },

            _playAudio: async function(text, savedVoiceLang, savedVoiceName, renderId) {
                const self = this;
                const thisRenderId = renderId || this._state.renderId;
                this._stopAudio();
                
                const userLang = localStorage.getItem('appLanguage') || 'ko';
                if (userLang !== 'ko' && !this._state.translationComplete) {
                    await new Promise(resolve => {
                        const handler = () => {
                            window.removeEventListener('adminTranslationComplete', handler);
                            resolve();
                        };
                        window.addEventListener('adminTranslationComplete', handler);
                        setTimeout(resolve, 3500);
                    });
                }
                
                // ğŸŒ 2025-12-24: ë²ˆì—­ í´ë˜ìŠ¤ ê°ì§€ í›„ ì‹¤ì œ í…ìŠ¤íŠ¸ ë³€í™˜ê¹Œì§€ ì¶”ê°€ ëŒ€ê¸° (500ms)
                if (userLang !== 'ko') {
                    await new Promise(r => setTimeout(r, 500));
                    console.log('[TTS] ë²ˆì—­ í…ìŠ¤íŠ¸ ì ìš© ëŒ€ê¸° ì™„ë£Œ (500ms)');
                }
                
                // ğŸŒ Google Translateì˜ <font> íƒœê·¸ì—ì„œ ë²ˆì—­ëœ í…ìŠ¤íŠ¸ ì¶”ì¶œ
                let currentText = text;
                const fontEl = this._els.description.querySelector('font');
                if (fontEl) {
                    currentText = fontEl.innerText.trim() || fontEl.textContent.trim() || text;
                    console.log('[TTS] Google Translate <font> íƒœê·¸ì—ì„œ ë²ˆì—­ í…ìŠ¤íŠ¸ ì¶”ì¶œ');
                } else {
                    currentText = this._els.description.innerText || text;
                }
                const cleanText = currentText.replace(new RegExp('<br\\s*/?>', 'gi'), ' ');
                const sentences = cleanText.match(/[^.!?]+[.!?]+/g) || [cleanText];
                
                this._state.originalText = cleanText;
                this._state.currentUtterance = new SpeechSynthesisUtterance(cleanText);
                
                // ğŸŒ 2025-12-24: ì•± ì–¸ì–´ ë¬´ì¡°ê±´ ìš°ì„  (ì €ì¥ëœ ì–¸ì–´ ë¬´ì‹œ)
                const langFullMap = { 'ko': 'ko-KR', 'en': 'en-US', 'ja': 'ja-JP', 'zh-CN': 'zh-CN', 'fr': 'fr-FR', 'de': 'de-DE', 'es': 'es-ES' };
                const fullLang = langFullMap[userLang] || 'ko-KR';
                
                let voices = this._state.synth.getVoices();
                if (voices.length === 0) {
                    await new Promise(resolve => {
                        const checkVoices = () => {
                            voices = self._state.synth.getVoices();
                            if (voices.length > 0) resolve();
                            else setTimeout(checkVoices, 100);
                        };
                        setTimeout(checkVoices, 100);
                        setTimeout(resolve, 1000);
                    });
                    voices = this._state.synth.getVoices();
                }
                this._state.voices = voices;
                
                let targetVoice = null;
                const shortLang = fullLang.substring(0, 2);
                
                if (shortLang === 'ko') {
                    // â­ í•œêµ­ì–´ í•˜ë“œì½”ë”© (iOS: Yuna/Sora, Android: ìœ ë‚˜/ì†Œë¼, Windows: Heami)
                    const koVoices = voices.filter(v => v.lang.startsWith('ko'));
                    targetVoice = koVoices.find(v => v.name.includes('Yuna'))
                               || koVoices.find(v => v.name.includes('Sora'))
                               || koVoices.find(v => v.name.includes('ìœ ë‚˜'))
                               || koVoices.find(v => v.name.includes('ì†Œë¼'))
                               || koVoices.find(v => v.name.includes('Heami'))
                               || koVoices[0];
                    console.log('[AdminDetailPage TTS] í•œêµ­ì–´ ìŒì„±:', targetVoice?.name);
                } else {
                    targetVoice = this._getVoiceForLanguage(shortLang === 'zh' ? 'zh-CN' : shortLang);
                }
                
                this._state.currentUtterance.voice = targetVoice;
                this._state.currentUtterance.lang = fullLang;
                this._state.currentUtterance.rate = 1.0;
                
                let currentSentenceIndex = 0;
                
                this._state.currentUtterance.onstart = () => {
                    self._updateAudioButtonIcon(true);
                };
                
                this._state.currentUtterance.onboundary = (event) => {
                    if (thisRenderId !== self._state.renderId) return;
                    
                    if (event.name === 'sentence') {
                        const highlightedHTML = sentences.map((sentence, idx) => {
                            if (idx === currentSentenceIndex) {
                                return '<span class="current-sentence" style="background-color: rgba(66, 133, 244, 0.3); font-weight: 600;">' + sentence + '</span>';
                            }
                            return sentence;
                        }).join('');
                        
                        self._els.description.innerHTML = highlightedHTML;
                        currentSentenceIndex++;
                        
                        const currentSpan = self._els.description.querySelector('.current-sentence');
                        if (currentSpan) {
                            currentSpan.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }
                };
                
                this._state.currentUtterance.onend = () => {
                    if (thisRenderId !== self._state.renderId) return;
                    self._updateAudioButtonIcon(false);
                    self._els.description.textContent = self._state.originalText;
                };
                
                this._state.synth.speak(this._state.currentUtterance);
            },

            _stopAudio: function() {
                if (this._state.currentUtterance) {
                    this._state.currentUtterance.onboundary = null;
                    this._state.currentUtterance.onend = null;
                    this._state.currentUtterance.onstart = null;
                    this._state.currentUtterance.onerror = null;
                }
                if (this._state.synth && this._state.synth.speaking) {
                    this._state.synth.pause();
                    this._state.synth.cancel();
                }
                this._updateAudioButtonIcon(false);
                if (this._state.originalText && this._els.description) {
                    this._els.description.textContent = this._state.originalText;
                }
            },

            _toggleAudio: function() {
                const text = this._els.description.textContent;
                if (!text || text === 'ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...') return;

                if (this._state.synth.speaking) {
                    this._stopAudio();
                } else {
                    this._playAudio(text, this._state.savedVoiceLang, this._state.savedVoiceName);
                }
            },

            _updateAudioButtonIcon: function(isPlaying) {
                this._els.audioBtn.innerHTML = isPlaying ? `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor">
                        <path fill-rule="evenodd" d="M6.75 5.25a.75.75 0 01.75-.75H9a.75.75 0 01.75.75v13.5a.75.75 0 01-.75.75H7.5a.75.75 0 01-.75-.75V5.25zm7.5 0A.75.75 0 0115 4.5h1.5a.75.75 0 01.75.75v13.5a.75.75 0 01-.75.75H15a.75.75 0 01-.75-.75V5.25z" clip-rule="evenodd" />
                    </svg>
                ` : `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor">
                        <path fill-rule="evenodd" d="M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.648c1.295.748 1.295 2.538 0 3.286L7.279 20.99c-1.25.717-2.779-.217-2.779-1.643V5.653z" clip-rule="evenodd" />
                    </svg>
                `;
            },

            _toggleText: function() {
                this._state.isTextVisible = !this._state.isTextVisible;
                this._els.textOverlay.style.opacity = this._state.isTextVisible ? '1' : '0';
            }
        };
        
        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            adminDetailPage.init();
        });

        // ìƒì„¸ë³´ê¸° ì—´ê¸° í•¨ìˆ˜
        function viewGuideDetail(guideId) {
            const guide = allGuides.find(g => g.id === guideId);
            if (!guide) return;

            adminDetailPage.openWithData({
                imageUrl: guide.imageUrl,
                description: guide.description,
                locationName: guide.locationName,
                voiceLang: guide.voiceLang,
                voiceName: guide.voiceName
            });
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ê°€ì´ë“œ ê´€ë¦¬ í•¨ìˆ˜
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let allGuides = [];
        let displayedGuides = 0;
        const GUIDES_PER_PAGE = 30;
        let selectedGuideIds = new Set();

        async function searchGuides() {
            const locationSearch = document.getElementById('guideLocationSearch').value.trim();
            const tagsSearch = document.getElementById('guideTagsSearch').value.trim();
            
            const params = new URLSearchParams();
            if (locationSearch) params.append('locationName', locationSearch);
            if (tagsSearch) params.append('tags', tagsSearch);
            params.append('limit', GUIDES_PER_PAGE);
            params.append('offset', 0);
            
            try {
                const res = await fetch(`/api/admin/guides?${params}`);
                if (!res.ok) throw new Error('ê²€ìƒ‰ ì‹¤íŒ¨');
                
                const data = await res.json();
                allGuides = data.guides;
                displayedGuides = allGuides.length;
                
                document.getElementById('guideCount').textContent = `ì´ ${data.total}ê°œ`;
                renderGuides();
            } catch (error) {
                console.error('ê°€ì´ë“œ ê²€ìƒ‰ ì˜¤ë¥˜:', error);
                alert('ê°€ì´ë“œ ê²€ìƒ‰ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function renderGuides() {
            const grid = document.getElementById('guidesGrid');
            if (!grid) return;
            
            if (allGuides.length === 0) {
                grid.innerHTML = '<p class="text-gray-500 col-span-full text-center py-8">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            grid.innerHTML = allGuides.map(guide => `
                <div class="border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition ${selectedGuideIds.has(guide.id) ? 'ring-2 ring-blue-500' : ''}">
                    <div class="relative">
                        <img src="${guide.imageUrl || '/placeholder.jpg'}" alt="${guide.title}" class="w-full h-48 object-cover cursor-pointer hover:opacity-90 transition" onclick="viewGuideDetail('${guide.id}')">
                        <label class="absolute top-2 right-2 cursor-pointer" onclick="event.stopPropagation()">
                            <input type="checkbox" class="w-5 h-5 rounded" ${selectedGuideIds.has(guide.id) ? 'checked' : ''} onchange="toggleGuideSelection('${guide.id}')">
                        </label>
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-gray-900 mb-1 truncate">${guide.title}</h3>
                        <p class="text-xs text-gray-400 mb-2">${formatDateTime(guide.created_at || guide.createdAt)}</p>
                        <p class="text-sm text-gray-500 mb-2">${guide.locationName || 'ìœ„ì¹˜ ì—†ìŒ'}</p>
                        <div class="flex flex-wrap gap-1 mb-3">
                            ${(guide.tags || []).map(tag => `
                                <span class="px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded">${tag}</span>
                            `).join('')}
                        </div>
                        <div class="flex gap-2">
                            <button onclick="editGuideTags('${guide.id}')" class="flex-1 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded transition text-sm">
                                íƒœê·¸ í¸ì§‘
                            </button>
                            <button onclick="deleteGuide('${guide.id}')" class="px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded transition text-sm">
                                ì‚­ì œ
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            updateSelectionUI();
        }

        async function editGuideTags(guideId) {
            const guide = allGuides.find(g => g.id === guideId);
            if (!guide) return;
            
            const currentTags = (guide.tags || []).join(', ');
            const newTagsStr = prompt(`íƒœê·¸ í¸ì§‘ (ì‰¼í‘œë¡œ êµ¬ë¶„)\\n\\ní˜„ì¬ íƒœê·¸: ${currentTags || 'ì—†ìŒ'}`, currentTags);
            
            if (newTagsStr === null) return;
            
            const newTags = newTagsStr.split(',').map(t => t.trim()).filter(t => t);
            
            try {
                const res = await fetch(`/api/admin/guides/${guideId}`, {
                    method: 'PATCH',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ tags: newTags })
                });
                
                if (!res.ok) throw new Error('íƒœê·¸ í¸ì§‘ ì‹¤íŒ¨');
                
                alert('âœ… íƒœê·¸ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!');
                searchGuides();
            } catch (error) {
                console.error('íƒœê·¸ í¸ì§‘ ì˜¤ë¥˜:', error);
                alert('íƒœê·¸ í¸ì§‘ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        async function deleteGuide(guideId) {
            const guide = allGuides.find(g => g.id === guideId);
            if (!guide) return;
            
            const guideName = guide.title || guide.locationName || 'ì´ ê°€ì´ë“œ';
            if (!confirm(`"${guideName}"ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\\n\\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)) return;
            
            try {
                const res = await fetch(`/api/admin/guides/${guideId}`, {
                    method: 'DELETE'
                });
                
                if (!res.ok) throw new Error('ê°€ì´ë“œ ì‚­ì œ ì‹¤íŒ¨');
                
                alert('âœ… ê°€ì´ë“œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!');
                
                // ì„ íƒëœ ê°€ì´ë“œ ëª©ë¡ì—ì„œë„ ì œê±°
                selectedGuideIds.delete(guideId);
                
                // ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                searchGuides();
            } catch (error) {
                console.error('ê°€ì´ë“œ ì‚­ì œ ì˜¤ë¥˜:', error);
                alert('ê°€ì´ë“œ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì „ì²´ ì‚­ì œ ê¸°ëŠ¥
        async function deleteAllGuides() {
            const totalCount = document.getElementById('guideCount').textContent;
            
            if (!confirm(`âš ï¸ ëª¨ë“  ìƒì„¸í˜ì´ì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\n${totalCount}\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!`)) return;
            if (!confirm(`ğŸš¨ ìµœì¢… í™•ì¸: ì •ë§ë¡œ ëª¨ë“  ìƒì„¸í˜ì´ì§€ë¥¼ ì˜êµ¬ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) return;
            
            try {
                const res = await fetch('/api/admin/guides/delete-all', {
                    method: 'DELETE',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                if (!res.ok) {
                    const error = await res.json();
                    throw new Error(error.error || 'ì „ì²´ ì‚­ì œ ì‹¤íŒ¨');
                }
                
                const result = await res.json();
                alert(`âœ… ${result.message}`);
                
                // ì„ íƒ ì´ˆê¸°í™” ë° ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                selectedGuideIds.clear();
                searchGuides();
            } catch (error) {
                console.error('ì „ì²´ ì‚­ì œ ì˜¤ë¥˜:', error);
                alert('âŒ ì „ì²´ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        }

        function toggleGuideSelection(guideId) {
            if (selectedGuideIds.has(guideId)) {
                selectedGuideIds.delete(guideId);
            } else {
                selectedGuideIds.add(guideId);
            }
            renderGuides();
        }

        function updateSelectionUI() {
            const count = selectedGuideIds.size;
            document.getElementById('selectedCount').textContent = count;
            document.getElementById('createShareBtn').disabled = count === 0;
        }

        function openCreateShareModal() {
            const name = prompt(`ê³µìœ  í˜ì´ì§€ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”\n\nì„ íƒí•œ ê°€ì´ë“œ: ${selectedGuideIds.size}ê°œ`);
            if (!name || name.trim().length === 0) return;
            
            createShareFromGuides(name.trim());
        }

        async function createShareFromGuides(name) {
            try {
                const res = await fetch('/api/admin/create-share-from-guides', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        guideIds: Array.from(selectedGuideIds),
                        name
                    })
                });
                
                if (!res.ok) {
                    const error = await res.json();
                    throw new Error(error.error || 'ê³µìœ  í˜ì´ì§€ ìƒì„± ì‹¤íŒ¨');
                }
                
                const data = await res.json();
                alert(`ê³µìœ  í˜ì´ì§€ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!\n\n${data.shareUrl}`);
                
                selectedGuideIds.clear();
                renderGuides();
            } catch (error) {
                console.error('ê³µìœ  í˜ì´ì§€ ìƒì„± ì˜¤ë¥˜:', error);
                alert('ê³µìœ  í˜ì´ì§€ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
            }
        }

        function resetGuideFilters() {
            document.getElementById('guideLocationSearch').value = '';
            document.getElementById('guideTagsSearch').value = '';
            searchGuides();
        }

        async function loadMoreGuides() {
            const locationSearch = document.getElementById('guideLocationSearch').value.trim();
            const tagsSearch = document.getElementById('guideTagsSearch').value.trim();
            
            const params = new URLSearchParams();
            if (locationSearch) params.append('locationName', locationSearch);
            if (tagsSearch) params.append('tags', tagsSearch);
            params.append('limit', GUIDES_PER_PAGE);
            params.append('offset', displayedGuides);
            
            try {
                const res = await fetch(`/api/admin/guides?${params}`);
                if (!res.ok) throw new Error('ë¡œë“œ ì‹¤íŒ¨');
                
                const data = await res.json();
                allGuides = [...allGuides, ...data.guides];
                displayedGuides = allGuides.length;
                
                renderGuides();
            } catch (error) {
                console.error('ë” ë³´ê¸° ì˜¤ë¥˜:', error);
                alert('ë” ë³´ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // Featured ê°¤ëŸ¬ë¦¬ ê´€ë¦¬ í•¨ìˆ˜
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        let allSharePages = [];
        let currentFeaturedPages = [];

        async function searchFeaturedShares() {
            const query = document.getElementById('featuredShareSearch').value.trim();
            
            try {
                const res = await fetch(`/api/admin/shares?search=${encodeURIComponent(query)}`);
                if (!res.ok) throw new Error('ê²€ìƒ‰ ì‹¤íŒ¨');
                
                const data = await res.json();
                allSharePages = data.shares;
                renderFeaturedSearchResults();
            } catch (error) {
                console.error('ê³µìœ  í˜ì´ì§€ ê²€ìƒ‰ ì˜¤ë¥˜:', error);
            }
        }

        function renderFeaturedSearchResults() {
            const list = document.getElementById('featuredSharesList');
            if (!list) return;
            
            if (allSharePages.length === 0) {
                list.innerHTML = '<p class="text-gray-500 text-sm text-center py-4">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</p>';
                return;
            }
            
            list.innerHTML = allSharePages.map(share => `
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                    <div class="flex-1 min-w-0">
                        <p class="font-medium text-gray-900 truncate">${share.name}</p>
                        <p class="text-sm text-gray-500">ì¡°íšŒìˆ˜: ${share.downloadCount || 0}</p>
                    </div>
                    <button onclick="addToFeatured('${share.id}')" class="px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded transition">
                        ì¶”ê°€
                    </button>
                </div>
            `).join('');
        }

        async function loadCurrentFeatured() {
            try {
                const res = await fetch('/api/featured');
                if (!res.ok) throw new Error('Featured ë¡œë“œ ì‹¤íŒ¨');
                
                const data = await res.json();
                currentFeaturedPages = data.featured || [];
                renderCurrentFeatured();
            } catch (error) {
                console.error('Featured ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        function renderCurrentFeatured() {
            const list = document.getElementById('currentFeaturedList');
            const countDisplay = document.getElementById('featuredCountDisplay');
            if (!list || !countDisplay) return;
            
            countDisplay.textContent = `${currentFeaturedPages.length}/3`;
            
            if (currentFeaturedPages.length === 0) {
                list.innerHTML = '<p class="text-gray-500 text-sm text-center py-4">Featured í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤</p>';
                return;
            }
            
            list.innerHTML = currentFeaturedPages.map(page => `
                <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                    <div class="flex-1 min-w-0">
                        <p class="font-medium text-gray-900 truncate">${page.name}</p>
                        <p class="text-sm text-gray-500">ìˆœì„œ: ${page.featuredOrder || '-'}</p>
                    </div>
                    <button onclick="removeFromFeatured('${page.id}')" class="px-3 py-1 bg-red-500 hover:bg-red-600 text-white text-sm rounded transition">
                        ì œê±°
                    </button>
                </div>
            `).join('');
        }

        async function addToFeatured(shareId) {
            if (currentFeaturedPages.length >= 3) {
                alert('FeaturedëŠ” ìµœëŒ€ 3ê°œê¹Œì§€ë§Œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                return;
            }
            
            try {
                const res = await fetch(`/api/admin/shares/${shareId}/featured`, {
                    method: 'PATCH',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ featured: true })
                });
                
                if (!res.ok) throw new Error('Featured ì¶”ê°€ ì‹¤íŒ¨');
                
                alert('Featuredì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
                await loadCurrentFeatured();
            } catch (error) {
                console.error('Featured ì¶”ê°€ ì˜¤ë¥˜:', error);
                alert('Featured ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        async function removeFromFeatured(shareId) {
            if (!confirm('Featuredì—ì„œ ì œê±°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                const res = await fetch(`/api/admin/shares/${shareId}/featured`, {
                    method: 'PATCH',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ featured: false })
                });
                
                if (!res.ok) throw new Error('Featured ì œê±° ì‹¤íŒ¨');
                
                alert('Featuredì—ì„œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.');
                await loadCurrentFeatured();
            } catch (error) {
                console.error('Featured ì œê±° ì˜¤ë¥˜:', error);
                alert('Featured ì œê±°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ê²€ìƒ‰ ì…ë ¥ ì´ë²¤íŠ¸
        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('featuredShareSearch');
            if (searchInput) {
                searchInput.addEventListener('input', () => {
                    if (searchInput.value.trim().length > 0) {
                        searchFeaturedShares();
                    }
                });
            }
        });

        // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
        async function init() {
            try {
                // ìš”ì•½ ë°ì´í„° ë¡œë“œ
                const res = await fetch('/api/admin/overview', {
                    credentials: 'include'
                });
                
                // 401 ì—ëŸ¬ ì‹œ ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸
                if (res.status === 401) {
                    await promptAdminLogin();
                    return init(); // ë¡œê·¸ì¸ í›„ ì¬ì‹œë„
                }
                
                if (!res.ok) throw new Error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
                const data = await res.json();
                
                renderOverview(data);
                
                document.getElementById('loading').classList.add('hidden');
                document.getElementById('content-overview').classList.remove('hidden');
            } catch (error) {
                console.error('ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                document.getElementById('loading').innerHTML = `
                    <p class="text-red-600">ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨</p>
                    <p class="text-sm text-gray-500 mt-2">${error.message}</p>
                `;
            }
        }
        
        // ê´€ë¦¬ì ë¡œê·¸ì¸ í”„ë¡¬í”„íŠ¸
        async function promptAdminLogin() {
            const password = prompt('ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:');
            if (!password) {
                throw new Error('ë¹„ë°€ë²ˆí˜¸ê°€ ì…ë ¥ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
            }
            
            const res = await fetch('/api/admin/auth', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                credentials: 'include',
                body: JSON.stringify({ password })
            });
            
            if (!res.ok) {
                alert('âŒ ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤.');
                throw new Error('ì¸ì¦ ì‹¤íŒ¨');
            }
            
            const data = await res.json();
            console.log('âœ… ê´€ë¦¬ì ì¸ì¦ ì„±ê³µ:', data);
        }

        // ìš”ì•½ ë Œë”ë§
        function renderOverview(data) {
            document.getElementById('totalUsers').textContent = data.totalUsers.toLocaleString();
            document.getElementById('recentUsers').textContent = data.recentUsers.toLocaleString();
            document.getElementById('totalApiCalls').textContent = data.totalApiCalls.toLocaleString();
            document.getElementById('estimatedCost').textContent = `â‚©${Math.round(data.estimatedCost * 1300).toLocaleString()}`;
            document.getElementById('totalShares').textContent = data.totalShares.toLocaleString();
            document.getElementById('totalViews').textContent = data.totalViews.toLocaleString();
            
            // ë¡œê·¸ì¸ ë°©ì‹
            const providerHtml = data.providers.map(p => `
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                    <span class="font-medium text-gray-700">${p.provider === 'google' ? 'Google' : p.provider === 'kakao' ? 'Kakao' : 'Replit'}</span>
                    <span class="font-bold text-gray-900">${p.count}ëª…</span>
                </div>
            `).join('');
            document.getElementById('providerStats').innerHTML = providerHtml;
        }

        // ì¶”ì²œ ê°¤ëŸ¬ë¦¬ ë¡œë“œ
        async function loadFeatured() {
            try {
                const res = await fetch('/api/admin/featured');
                if (!res.ok) throw new Error('ì¶”ì²œ ê°¤ëŸ¬ë¦¬ ë¡œë“œ ì‹¤íŒ¨');
                const data = await res.json();
                renderFeatured(data.featured);
            } catch (error) {
                console.error('ì¶”ì²œ ê°¤ëŸ¬ë¦¬ ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // ì¶”ì²œ ê°¤ëŸ¬ë¦¬ ë Œë”ë§
        function renderFeatured(featured) {
            const html = featured.map(item => `
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                    <div class="flex-1">
                        <h3 class="font-semibold text-gray-900">${item.name}</h3>
                        <p class="text-sm text-gray-500">${formatDateTime(item.created_at || item.createdAt)}</p>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="window.open('/s/${item.id}', '_blank')" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-lg transition">
                            ë¯¸ë¦¬ë³´ê¸°
                        </button>
                        <button onclick="removeFeatured('${item.id}')" class="px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white text-sm rounded-lg transition">
                            ì œê±°
                        </button>
                    </div>
                </div>
            `).join('');
            document.getElementById('featuredList').innerHTML = html || '<p class="text-center text-gray-500 py-8">ì¶”ì²œ ê°¤ëŸ¬ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
        }

        // ì „ì²´ ê³µìœ  ë¡œë“œ
        async function loadAllShares() {
            try {
                const res = await fetch('/api/admin/content/all-shares');
                if (!res.ok) throw new Error('ì „ì²´ ê³µìœ  ë¡œë“œ ì‹¤íŒ¨');
                const data = await res.json();
                allShares = data.shares;
                displayedShares = 0;
                renderAllShares();
            } catch (error) {
                console.error('ì „ì²´ ê³µìœ  ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // ì „ì²´ ê³µìœ  ë Œë”ë§
        function renderAllShares() {
            const end = Math.min(displayedShares + SHARES_PER_PAGE, allShares.length);
            const shares = allShares.slice(displayedShares, end);
            
            const html = shares.map(item => `
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                    <div class="flex-1">
                        <h3 class="font-semibold text-gray-900">${item.name}</h3>
                        <p class="text-sm text-gray-500">${formatDateTime(item.created_at || item.createdAt)} | ì¡°íšŒìˆ˜: ${item.download_count || item.downloadCount || 0}</p>
                    </div>
                    <div class="flex gap-2">
                        <button onclick="window.open('/s/${item.id}', '_blank')" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-lg transition">
                            ë¯¸ë¦¬ë³´ê¸°
                        </button>
                        <button onclick="deleteShare('${item.id}')" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm rounded-lg transition">
                            ì‚­ì œ
                        </button>
                    </div>
                </div>
            `).join('');
            
            if (displayedShares === 0) {
                document.getElementById('allSharesList').innerHTML = html || '<p class="text-center text-gray-500 py-8">ê³µìœ  í˜ì´ì§€ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            } else {
                document.getElementById('allSharesList').insertAdjacentHTML('beforeend', html);
            }
            
            displayedShares = end;
            document.getElementById('loadMoreBtn').style.display = displayedShares >= allShares.length ? 'none' : 'block';
        }

        // ë” ë³´ê¸°
        function loadMore() {
            renderAllShares();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // â­ V1 ê³µìœ í˜ì´ì§€ ì¼ê´„ ì¬ìƒì„± (2025-12-16)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        async function regenerateAllV1() {
            if (!confirm('ëª¨ë“  ê³µìœ í˜ì´ì§€ë¥¼ V1 í‘œì¤€ í…œí”Œë¦¿ìœ¼ë¡œ ì¬ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nâ€¢ ìŒì„± ê°€ì´ë“œ ì¸ë„¤ì¼ í‘œì¤€í™”\nâ€¢ locationName/voiceQuery í•„ë“œ ì ìš©\nâ€¢ TTS ìŒì„± ìš°ì„ ìˆœìœ„ ì ìš©')) {
                return;
            }

            try {
                const button = event.target.closest('button');
                const originalText = button.innerHTML;
                button.disabled = true;
                button.innerHTML = '<svg class="animate-spin h-5 w-5 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>';

                const res = await fetch('/api/admin/regenerate-all', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });

                if (!res.ok) {
                    throw new Error('ì¬ìƒì„± ì‹¤íŒ¨');
                }

                const data = await res.json();
                alert(`âœ… V1 ì¼ê´„ ì¬ìƒì„± ì™„ë£Œ!\n\nì„±ê³µ: ${data.successCount}ê°œ\nì‹¤íŒ¨: ${data.failCount}ê°œ`);
                
                location.reload();
            } catch (error) {
                console.error('V1 ì¬ìƒì„± ì˜¤ë¥˜:', error);
                alert('âŒ V1 ì¼ê´„ ì¬ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                button.disabled = false;
                button.innerHTML = originalText;
            }
        }

        // í†µê³„ ë¡œë“œ
        async function loadStats() {
            try {
                const res = await fetch('/api/admin/stats');
                if (!res.ok) throw new Error('í†µê³„ ë¡œë“œ ì‹¤íŒ¨');
                const data = await res.json();
                renderStats(data);
            } catch (error) {
                console.error('í†µê³„ ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }

        // í†µê³„ ë Œë”ë§
        function renderStats(data) {
            // ì¼ë³„ ì¶”ì´
            const trendsHtml = data.dailyTrends && data.dailyTrends.length > 0
                ? data.dailyTrends.map(day => `
                    <tr class="border-b hover:bg-gray-50">
                        <td class="py-3 px-4 text-sm text-gray-700">${new Date(day.date).toLocaleDateString('ko-KR', { month: 'short', day: 'numeric' })}</td>
                        <td class="py-3 px-4 text-sm text-center font-semibold text-gray-900">${day.newUsers}</td>
                        <td class="py-3 px-4 text-sm text-center font-semibold text-gray-900">${day.apiCalls}</td>
                        <td class="py-3 px-4 text-sm text-center font-semibold text-gray-900">${day.shares}</td>
                    </tr>
                `).join('')
                : '<tr><td colspan="4" class="py-8 text-center text-gray-500">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. (AI í˜¸ì¶œ ë° ì‚¬ìš©ì í™œë™ ë¡œê·¸ ìˆ˜ì§‘ ì „)</td></tr>';
            document.getElementById('dailyTrends').innerHTML = trendsHtml;

            // ë””ë°”ì´ìŠ¤
            const deviceHtml = data.devices && data.devices.length > 0
                ? data.devices.map(d => `
                    <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                        <span class="text-sm text-gray-700">${d.type}</span>
                        <span class="text-sm font-semibold text-gray-900">${d.count} (${d.percentage}%)</span>
                    </div>
                `).join('')
                : '<p class="text-sm text-center text-gray-500 py-4">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</p>';
            document.getElementById('deviceStats').innerHTML = deviceHtml;

            // ë¸Œë¼ìš°ì €
            const browserHtml = data.browsers && data.browsers.length > 0
                ? data.browsers.map(b => `
                    <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                        <span class="text-sm text-gray-700">${b.name}</span>
                        <span class="text-sm font-semibold text-gray-900">${b.count} (${b.percentage}%)</span>
                    </div>
                `).join('')
                : '<p class="text-sm text-center text-gray-500 py-4">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</p>';
            document.getElementById('browserStats').innerHTML = browserHtml;

            // AI ì„±ëŠ¥
            document.getElementById('avgResponseTime').textContent = data.aiPerformance.avgResponseTime || data.aiPerformance.avgResponseTime === 0 ? `${data.aiPerformance.avgResponseTime}ms` : '-';
            document.getElementById('successRate').textContent = data.aiPerformance.successRate || data.aiPerformance.successRate === 0 ? `${data.aiPerformance.successRate}%` : '-';
            document.getElementById('errorRate').textContent = data.aiPerformance.errorRate || data.aiPerformance.errorRate === 0 ? `${data.aiPerformance.errorRate}%` : '-';
        }

        // Featured ì œê±°
        async function removeFeatured(id) {
            if (!confirm('ì¶”ì²œ ê°¤ëŸ¬ë¦¬ì—ì„œ ì œê±°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                const res = await fetch(`/api/admin/featured/${id}`, { method: 'DELETE' });
                if (!res.ok) throw new Error('ì œê±° ì‹¤íŒ¨');
                alert('ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.');
                loadFeatured();
            } catch (error) {
                alert('ì˜¤ë¥˜: ' + error.message);
            }
        }

        // ê³µìœ  ì‚­ì œ
        async function deleteShare(id) {
            const share = allShares.find(s => s.id === id);
            const name = share ? share.name : 'ê³µìœ  í˜ì´ì§€';
            
            if (!confirm(`"${name}" ê³µìœ  í˜ì´ì§€ë¥¼ ì˜êµ¬ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)) return;
            if (!confirm(`ìµœì¢… í™•ì¸: ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) return;
            
            try {
                const res = await fetch(`/api/admin/shares/${id}`, { method: 'DELETE' });
                if (!res.ok) throw new Error('ì‚­ì œ ì‹¤íŒ¨');
                const result = await res.json();
                alert(result.message);
                loadAllShares();
            } catch (error) {
                alert('ì˜¤ë¥˜: ' + error.message);
            }
        }

        // ê²€ìƒ‰ ê¸°ëŠ¥
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('featuredSearch')?.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                document.querySelectorAll('#featuredList > div').forEach(item => {
                    const text = item.textContent.toLowerCase();
                    item.style.display = text.includes(query) ? 'flex' : 'none';
                });
            });

            document.getElementById('allSharesSearch')?.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                document.querySelectorAll('#allSharesList > div').forEach(item => {
                    const text = item.textContent.toLowerCase();
                    item.style.display = text.includes(query) ? 'flex' : 'none';
                });
            });
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ’° ìºì‹œë°± ê´€ë¦¬ í•¨ìˆ˜ë“¤ (2025-11-28 ë¦¬ì›Œë“œ ì‹œìŠ¤í…œ)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        async function loadCashbackRequests() {
            try {
                const res = await fetch('/api/admin/cashback');
                const data = await res.json();
                
                if (!data.requests) {
                    document.getElementById('cashbackList').innerHTML = '<tr><td colspan="7" class="text-center py-8 text-gray-400">ìºì‹œë°± ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                    return;
                }
                
                const pending = data.requests.filter(r => r.status === 'pending').length;
                const approved = data.requests.filter(r => r.status === 'approved').length;
                const totalAmount = data.requests
                    .filter(r => r.status === 'approved')
                    .reduce((sum, r) => sum + (r.cashAmount || 0), 0);
                
                document.getElementById('pendingCashback').textContent = pending;
                document.getElementById('approvedCashback').textContent = approved;
                document.getElementById('totalCashbackAmount').textContent = `â‚¬${(totalAmount / 100).toFixed(2)}`;
                
                if (data.requests.length === 0) {
                    document.getElementById('cashbackList').innerHTML = '<tr><td colspan="7" class="text-center py-8 text-gray-400">ìºì‹œë°± ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                    return;
                }
                
                document.getElementById('cashbackList').innerHTML = data.requests.map(req => {
                    const statusBadge = {
                        'pending': '<span class="px-2 py-1 bg-amber-100 text-amber-800 text-xs rounded-full">â³ ëŒ€ê¸°</span>',
                        'approved': '<span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">âœ… ìŠ¹ì¸</span>',
                        'rejected': '<span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full">âŒ ê±°ì ˆ</span>'
                    }[req.status] || req.status;
                    
                    const methodText = {
                        'kakaopay': 'ì¹´ì¹´ì˜¤í˜ì´',
                        'bank_transfer': 'ê³„ì¢Œì´ì²´'
                    }[req.paymentMethod] || req.paymentMethod;
                    
                    const actionBtns = req.status === 'pending' ? `
                        <div class="flex gap-2">
                            <button onclick="approveCashback('${req.id}')" class="px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-xs rounded-lg transition">ìŠ¹ì¸</button>
                            <button onclick="rejectCashback('${req.id}')" class="px-3 py-1 bg-red-500 hover:bg-red-600 text-white text-xs rounded-lg transition">ê±°ì ˆ</button>
                        </div>
                    ` : req.adminNote ? `<span class="text-xs text-gray-500">${req.adminNote}</span>` : '-';
                    
                    return `
                        <tr class="border-b hover:bg-gray-50">
                            <td class="py-3 px-4">${statusBadge}</td>
                            <td class="py-3 px-4 text-sm">${req.userId?.substring(0, 8) || '-'}...</td>
                            <td class="py-3 px-4 text-sm text-center font-medium">${req.creditsAmount}</td>
                            <td class="py-3 px-4 text-sm text-center font-medium text-green-600">â‚¬${(req.cashAmount / 100).toFixed(0)}</td>
                            <td class="py-3 px-4 text-sm">${methodText}<br><span class="text-xs text-gray-500">${req.paymentInfo || ''}</span></td>
                            <td class="py-3 px-4 text-sm">${formatDateTime(req.createdAt)}</td>
                            <td class="py-3 px-4">${actionBtns}</td>
                        </tr>
                    `;
                }).join('');
                
            } catch (error) {
                console.error('ìºì‹œë°± ëª©ë¡ ë¡œë“œ ì˜¤ë¥˜:', error);
                document.getElementById('cashbackList').innerHTML = '<tr><td colspan="7" class="text-center py-8 text-red-400">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</td></tr>';
            }
        }
        
        async function approveCashback(id) {
            const adminNote = prompt('ìŠ¹ì¸ ë©”ëª¨ (ì„ íƒì‚¬í•­):');
            
            try {
                const res = await fetch(`/api/admin/cashback/${id}/approve`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ adminNote: adminNote || 'ìŠ¹ì¸ë¨' })
                });
                
                const result = await res.json();
                
                if (result.success) {
                    alert('ìºì‹œë°±ì´ ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadCashbackRequests();
                } else {
                    alert('ì˜¤ë¥˜: ' + (result.error || 'ìŠ¹ì¸ ì‹¤íŒ¨'));
                }
            } catch (error) {
                alert('ì˜¤ë¥˜: ' + error.message);
            }
        }
        
        async function rejectCashback(id) {
            const adminNote = prompt('ê±°ì ˆ ì‚¬ìœ  (í•„ìˆ˜):');
            
            if (!adminNote) {
                alert('ê±°ì ˆ ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            try {
                const res = await fetch(`/api/admin/cashback/${id}/reject`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ adminNote })
                });
                
                const result = await res.json();
                
                if (result.success) {
                    alert('ìºì‹œë°±ì´ ê±°ì ˆë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadCashbackRequests();
                } else {
                    alert('ì˜¤ë¥˜: ' + (result.error || 'ê±°ì ˆ ì‹¤íŒ¨'));
                }
            } catch (error) {
                alert('ì˜¤ë¥˜: ' + error.message);
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // ğŸ¯ AI í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ í•¨ìˆ˜ (2025-12-18)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        const LANGUAGE_NAMES = {
            'ko': 'í•œêµ­ì–´',
            'en': 'English',
            'zh-CN': 'ä¸­æ–‡',
            'ja': 'æ—¥æœ¬èª',
            'fr': 'FranÃ§ais',
            'de': 'Deutsch',
            'es': 'EspaÃ±ol'
        };
        
        async function loadPrompts() {
            const container = document.getElementById('promptsList');
            container.innerHTML = '<p class="text-center text-gray-400 py-8">í”„ë¡¬í”„íŠ¸ ë¡œë”© ì¤‘...</p>';
            
            try {
                const res = await fetch('/api/admin/prompts', { credentials: 'include' });
                
                if (!res.ok) throw new Error('í”„ë¡¬í”„íŠ¸ ë¡œë“œ ì‹¤íŒ¨');
                
                const data = await res.json();
                allPrompts = data.prompts || [];
                
                if (allPrompts.length === 0) {
                    container.innerHTML = `
                        <div class="text-center py-12">
                            <p class="text-gray-500 mb-4">í”„ë¡¬í”„íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                            <button onclick="seedDefaultPrompts()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                                ê¸°ë³¸ í”„ë¡¬í”„íŠ¸ ìƒì„±
                            </button>
                        </div>
                    `;
                    return;
                }
                
                filterPrompts();
            } catch (error) {
                container.innerHTML = `<p class="text-center text-red-500 py-8">ì˜¤ë¥˜: ${error.message}</p>`;
            }
        }
        
        function filterPrompts() {
            const langFilter = document.getElementById('promptLangFilter').value;
            const typeFilter = document.getElementById('promptTypeFilter').value;
            
            let filtered = allPrompts;
            
            if (langFilter !== 'all') {
                filtered = filtered.filter(p => p.language === langFilter);
            }
            
            if (typeFilter !== 'all') {
                filtered = filtered.filter(p => p.type === typeFilter);
            }
            
            renderPrompts(filtered);
        }
        
        function renderPrompts(prompts) {
            const container = document.getElementById('promptsList');
            
            if (prompts.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-400 py-8">í•„í„°ë§ëœ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            container.innerHTML = prompts.map(p => `
                <div class="bg-white rounded-lg p-4 shadow-sm border-l-4 ${p.type === 'image' ? 'border-purple-500' : 'border-green-500'}">
                    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-3">
                        <div class="flex flex-wrap items-center gap-2">
                            <span class="text-lg">${p.type === 'image' ? 'ğŸ–¼ï¸' : 'ğŸ’¬'}</span>
                            <span class="font-semibold">${LANGUAGE_NAMES[p.language] || p.language}</span>
                            <span class="text-xs px-2 py-1 rounded ${p.type === 'image' ? 'bg-purple-100 text-purple-700' : 'bg-green-100 text-green-700'}">
                                ${p.type === 'image' ? 'ì´ë¯¸ì§€' : 'í…ìŠ¤íŠ¸'}
                            </span>
                            <span class="text-xs text-gray-400">v${p.version || 1}</span>
                        </div>
                    </div>
                    <textarea id="prompt-${p.language}-${p.type}" class="w-full h-48 p-3 text-sm text-gray-700 bg-gray-50 border border-gray-200 rounded-lg font-mono leading-relaxed resize-y focus:ring-2 focus:ring-blue-500 focus:border-transparent">${escapeHtml(p.content)}</textarea>
                    <div class="flex justify-between items-center mt-3">
                        <p class="text-xs text-gray-400">âš ï¸ "í…ìŠ¤íŠ¸ë¡œë§Œ ì‘ë‹µ" ê·œì¹™ í•„ìˆ˜</p>
                        <button onclick="savePromptDirect('${p.language}', '${p.type}')" class="px-4 py-2 text-sm bg-blue-500 text-white hover:bg-blue-600 rounded-lg transition font-medium">
                            ì €ì¥
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        async function savePromptDirect(language, type) {
            const textarea = document.getElementById(`prompt-${language}-${type}`);
            if (!textarea) {
                alert('í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const content = textarea.value.trim();
            
            if (!content) {
                alert('í”„ë¡¬í”„íŠ¸ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!content.includes('í…ìŠ¤íŠ¸ë¡œë§Œ ì‘ë‹µ') && !content.includes('text only') && !content.includes('text-only')) {
                if (!confirm('ê²½ê³ : "í…ìŠ¤íŠ¸ë¡œë§Œ ì‘ë‹µ" ê·œì¹™ì´ ì—†ìŠµë‹ˆë‹¤. ìŒì„± ì‘ë‹µì´ ìƒì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    return;
                }
            }
            
            try {
                const res = await fetch('/api/admin/prompts', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({ language, type, content })
                });
                
                const result = await res.json();
                
                if (result.success) {
                    alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    loadPrompts();
                } else {
                    alert('ì˜¤ë¥˜: ' + (result.error || 'ì €ì¥ ì‹¤íŒ¨'));
                }
            } catch (error) {
                alert('ì˜¤ë¥˜: ' + error.message);
            }
        }
        
        function openPromptEdit(language, type) {
            const prompt = allPrompts.find(p => p.language === language && p.type === type);
            
            if (!prompt) {
                alert('í”„ë¡¬í”„íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            document.getElementById('promptEditLang').value = language;
            document.getElementById('promptEditType').value = type;
            document.getElementById('promptEditContent').value = prompt.content;
            document.getElementById('promptEditTitle').textContent = 
                `í”„ë¡¬í”„íŠ¸ í¸ì§‘: ${LANGUAGE_NAMES[language]} - ${type === 'image' ? 'ì´ë¯¸ì§€' : 'í…ìŠ¤íŠ¸'}`;
            
            document.getElementById('promptEditModal').classList.remove('hidden');
        }
        
        function closePromptModal() {
            document.getElementById('promptEditModal').classList.add('hidden');
        }
        
        async function savePrompt() {
            const language = document.getElementById('promptEditLang').value;
            const type = document.getElementById('promptEditType').value;
            const content = document.getElementById('promptEditContent').value.trim();
            
            if (!content) {
                alert('í”„ë¡¬í”„íŠ¸ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!content.includes('í…ìŠ¤íŠ¸ë¡œë§Œ ì‘ë‹µ') && !content.includes('text only') && !content.includes('text-only')) {
                if (!confirm('ê²½ê³ : í”„ë¡¬í”„íŠ¸ì— "í…ìŠ¤íŠ¸ë¡œë§Œ ì‘ë‹µ" ê·œì¹™ì´ ì—†ìŠµë‹ˆë‹¤. ìŒì„± ì‘ë‹µì´ ìƒì„±ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    return;
                }
            }
            
            try {
                const res = await fetch('/api/admin/prompts', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    credentials: 'include',
                    body: JSON.stringify({ language, type, content })
                });
                
                const result = await res.json();
                
                if (result.success) {
                    alert('í”„ë¡¬í”„íŠ¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    closePromptModal();
                    loadPrompts();
                } else {
                    alert('ì˜¤ë¥˜: ' + (result.error || 'ì €ì¥ ì‹¤íŒ¨'));
                }
            } catch (error) {
                alert('ì˜¤ë¥˜: ' + error.message);
            }
        }
        
        async function seedDefaultPrompts() {
            if (!confirm('14ê°œ ê¸°ë³¸ í”„ë¡¬í”„íŠ¸ë¥¼ ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (ê¸°ì¡´ í”„ë¡¬í”„íŠ¸ëŠ” ìœ ì§€ë©ë‹ˆë‹¤)')) {
                return;
            }
            
            try {
                const res = await fetch('/api/admin/prompts/seed', {
                    method: 'POST',
                    credentials: 'include'
                });
                
                const result = await res.json();
                
                if (result.success) {
                    alert(result.message);
                    loadPrompts();
                } else {
                    alert('ì˜¤ë¥˜: ' + (result.error || 'ì‹œë”© ì‹¤íŒ¨'));
                }
            } catch (error) {
                alert('ì˜¤ë¥˜: ' + error.message);
            }
        }

        // ì´ˆê¸°í™”
        init();
    </script>

    <!-- Featured í¸ì§‘ ëª¨ë‹¬ (from index.html) -->
    <div id="editFeaturedModal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden">
            <!-- ëª¨ë‹¬ í—¤ë” -->
            <div class="flex items-center justify-between p-6 border-b border-gray-200">
                <h2 class="text-2xl font-bold text-gray-800">âœï¸ Featured í¸ì§‘</h2>
                <button onclick="closeEditModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>

            <!-- ëª¨ë‹¬ ë°”ë”” -->
            <div class="p-6 overflow-y-auto" style="max-height: calc(90vh - 200px);">
                <!-- ì…ë ¥ í•„ë“œ -->
                <div class="space-y-4 mb-6">
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ì œëª©</label>
                        <input id="editTitle" type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ë°œì‹ ì</label>
                        <input id="editSender" type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ìœ„ì¹˜</label>
                        <input id="editLocation" type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700 mb-2">ë‚ ì§œ</label>
                        <input id="editDate" type="date" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent">
                    </div>
                </div>

                <!-- ê°€ì´ë“œ ëª©ë¡ -->
                <div>
                    <h3 class="text-lg font-bold text-gray-800 mb-3">ğŸ“¸ ì½˜í…ì¸  ìˆœì„œ (â–²â–¼ ë²„íŠ¼ìœ¼ë¡œ ë³€ê²½)</h3>
                    <p class="text-sm text-gray-500 mb-3">ì—¬í–‰ ë™ì„ ì´ë‚˜ í•˜ì´ë¼ì´íŠ¸ ìˆœì„œëŒ€ë¡œ ë°°ì¹˜í•˜ì„¸ìš” (ìµœëŒ€ 20ê°œ)</p>
                    <div id="guideList" class="space-y-2 p-4 bg-gray-50 rounded-lg" style="max-height: 70vh; overflow-y: auto;">
                        <!-- ë™ì  ìƒì„± -->
                    </div>
                </div>
            </div>

            <!-- ëª¨ë‹¬ í‘¸í„° -->
            <div class="flex items-center justify-end gap-3 p-6 border-t border-gray-200 bg-gray-50">
                <button onclick="closeEditModal()" class="px-6 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 font-semibold transition-colors">
                    ì·¨ì†Œ
                </button>
                <button id="saveFeaturedBtn" class="px-6 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg font-semibold transition-all shadow-lg">
                    ğŸ’¾ ì €ì¥ ë° HTML ì¬ìƒì„±
                </button>
            </div>
        </div>
    </div>

    <!-- Google Translate Widget (ìˆ¨ê¹€) -->
    <div id="google_translate_element" style="display:none;"></div>

    <!-- ì–¸ì–´ í—¬í¼ -->
    <script src="language-helper.js"></script>

    <!-- Google Translate Initialization -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            // ğŸŒ 2025-12-24: ì–‘ë°©í–¥ ë²ˆì—­ - ì½˜í…ì¸  ì–¸ì–´ ìë™ ê°ì§€, ì•± ì–¸ì–´ë¡œ ë²ˆì—­
            new google.translate.TranslateElement({
                pageLanguage: 'auto',
                includedLanguages: 'ko,en,ja,zh-CN,fr,de,es',
                autoDisplay: false
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <!-- Google Translate CSS ìˆ¨ê¹€ + ìŠ¤í”¼ë„ˆ ì™„ì „ ìˆ¨ê¹€ -->
    <style>
        .goog-te-banner-frame { display: none !important; }
        .goog-te-banner-frame.skiptranslate { display: none !important; }
        body { top: 0px !important; }
        .goog-te-gadget { font-size: 0px !important; color: transparent !important; }
        .goog-logo-link { display: none !important; }
        .skiptranslate { display: none !important; }
        .goog-te-spinner-pos { display: none !important; }
        .goog-te-spinner { display: none !important; }
        .goog-te-spinner-animation { display: none !important; }
        .goog-te-menu-frame { display: none !important; }
        .goog-te-menu2 { display: none !important; }
        #goog-gt-tt { display: none !important; }
        .goog-te-balloon-frame { display: none !important; }
        .goog-text-highlight { background: none !important; box-shadow: none !important; }
        iframe.goog-te-menu-frame { display: none !important; }
        iframe.skiptranslate { display: none !important; }
        [id^="goog-gt-"] { display: none !important; }
    </style>
</body>
</html>
