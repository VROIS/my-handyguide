<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ì‚¬ìš©ì ì§€ì • - ì†ì•ˆì— ê°€ì´ë“œ</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234285F4'><path d='M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z'/></svg>">
    <meta name="theme-color" content="#4285F4"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://hangeul.pstatic.net">
    <link rel="stylesheet" href="https://hangeul.pstatic.net/maruburi/maruburi.css">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <style>
        :root {
            --gemini-blue: #4285F4;
        }
        html, body { 
            touch-action: manipulation; 
            -webkit-tap-highlight-color: transparent; 
            min-height: 100vh;
            background-color: #f3f4f6;
            font-family: 'MaruBuri', 'Pretendard', sans-serif;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        .card {
            background: white;
            border-radius: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            padding: 1.25rem;
            margin-bottom: 0.75rem;
        }
        .card-blue {
            background: linear-gradient(135deg, #e8f0fe 0%, #d2e3fc 100%);
            border: 1px solid #c2d7f7;
        }
        .menu-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.875rem 0;
            border-bottom: 1px solid #f3f4f6;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .menu-item:last-child {
            border-bottom: none;
        }
        .menu-item:active {
            background-color: #f9fafb;
        }
        .section-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 700;
            color: #374151;
            margin-bottom: 0.5rem;
        }
        .language-select {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            background: white;
            border: 1px solid #d1d5db;
            font-size: 1rem;
            color: #374151;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%236b7280'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.25rem;
            cursor: pointer;
        }
        .video-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            width: 100%;
            padding: 0.875rem 1rem;
            border-radius: 0.75rem;
            background: #f3f4f6;
            color: #374151;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        .video-btn:active {
            background-color: #e5e7eb;
        }
        
        /* Google Translate ë¸Œëœë”© ìˆ¨ê¸°ê¸° */
        .goog-te-banner-frame {
            display: none !important;
        }
        body {
            top: 0px !important;
        }
        .goog-te-gadget {
            font-size: 0px !important;
            color: transparent !important;
        }
        .goog-logo-link {
            display: none !important;
        }
        #google_translate_element {
            display: none !important;
        }
        .skiptranslate {
            display: none !important;
        }
        
        /* TTS í…ŒìŠ¤íŠ¸ ì„¹ì…˜ */
        .test-section {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px dashed #f59e0b;
        }
        .tts-btn {
            background: linear-gradient(135deg, #4285F4 0%, #3367d6 100%);
            color: white;
            font-weight: 700;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            transition: transform 0.1s;
        }
        .tts-btn:active {
            transform: scale(0.98);
        }
        
        /* ë²ˆì—­ ìƒíƒœ í‘œì‹œ */
        .translation-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: #dcfce7;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            color: #166534;
            margin-top: 0.75rem;
        }
        .translation-status.hidden {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Google Translate Widget (ìˆ¨ê¹€) -->
    <div id="google_translate_element"></div>

    <div class="min-h-screen pb-8">
        <!-- í—¤ë” -->
        <header class="bg-white/95 backdrop-blur-sm sticky top-0 z-50 border-b border-gray-200/80">
            <div class="max-w-lg mx-auto px-4 py-3 flex items-center">
                <button id="backBtn" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 transition" data-testid="button-back" onclick="history.back()">
                    <svg class="w-5 h-5 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"/>
                    </svg>
                </button>
                <h1 class="flex-1 text-center text-lg font-bold text-gray-900" style="font-family: 'Pretendard', sans-serif;">ì‚¬ìš©ì ì§€ì •</h1>
                <div class="w-10"></div>
            </div>
        </header>

        <main class="max-w-lg mx-auto px-4 py-4">
            <!-- ì–¸ì–´ ì„ íƒ ì¹´ë“œ (íŒŒë€ìƒ‰) -->
            <section class="card card-blue">
                <div class="section-title">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418"/>
                    </svg>
                    <span>ì–¸ì–´ / Language</span>
                </div>
                <select id="languageSelect" class="language-select notranslate" data-testid="select-language">
                    <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                    <option value="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
                    <option value="zh-CN">ğŸ‡¨ğŸ‡³ ä¸­æ–‡ (ç®€ä½“)</option>
                    <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                    <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
                    <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                </select>
                <p class="text-xs text-gray-500 mt-2">â€» ì „ì²´ í˜ì´ì§€ë¥¼ ë²ˆì—­í•˜ë ¤ë©´ ì„ íƒí•˜ì„¸ìš”</p>
                <div id="translationStatus" class="translation-status hidden">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    <span>ë²ˆì—­ ì ìš©ë¨</span>
                </div>
            </section>

            <!-- ğŸ”¬ TTS í…ŒìŠ¤íŠ¸ ì„¹ì…˜ (ê²€ì¦ìš©) -->
            <section class="card test-section">
                <div class="section-title">
                    <span>ğŸ”¬</span>
                    <span>ë²ˆì—­ + TTS í…ŒìŠ¤íŠ¸</span>
                </div>
                <p class="text-sm text-amber-800 mb-3">ì´ ì„¹ì…˜ì€ ê²€ì¦ìš©ì…ë‹ˆë‹¤. ì–¸ì–´ ì„ íƒ í›„ TTS ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”!</p>
                
                <!-- AI ì‘ë‹µ ìƒ˜í”Œ í…ìŠ¤íŠ¸ -->
                <div class="bg-white rounded-xl p-4 mb-4">
                    <p class="text-sm text-gray-500 mb-2">AI ì‘ë‹µ ìƒ˜í”Œ:</p>
                    <p id="sampleText" class="text-gray-800 leading-relaxed">
                        ì—í íƒ‘ì€ 1889ë…„ íŒŒë¦¬ ë§Œêµ­ë°•ëŒíšŒë¥¼ ê¸°ë…í•˜ì—¬ ê±´ì„¤ëœ ì² ì œ íƒ‘ì…ë‹ˆë‹¤. ë†’ì´ 330ë¯¸í„°ë¡œ íŒŒë¦¬ì˜ ìƒì§•ì´ ë˜ì—ˆìœ¼ë©°, ë§¤ë…„ 700ë§Œ ëª… ì´ìƒì˜ ê´€ê´‘ê°ì´ ë°©ë¬¸í•©ë‹ˆë‹¤. ë°¤ì—ëŠ” ì•„ë¦„ë‹¤ìš´ ì¡°ëª…ì´ ì¼œì ¸ ë¡œë§¨í‹±í•œ ë¶„ìœ„ê¸°ë¥¼ ì—°ì¶œí•©ë‹ˆë‹¤.
                    </p>
                </div>
                
                <button id="ttsTestBtn" class="tts-btn w-full" data-testid="button-tts-test">
                    ğŸ”Š ë²ˆì—­ëœ í…ìŠ¤íŠ¸ ì½ê¸° (TTS í…ŒìŠ¤íŠ¸)
                </button>
                
                <div id="ttsStatus" class="text-center text-sm text-amber-700 mt-3 hidden">
                    <span id="ttsStatusText">ì¬ìƒ ì¤‘...</span>
                </div>
            </section>

            <!-- ì‚¬ìš© ë°©ë²• -->
            <section class="card">
                <div class="section-title">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"/>
                    </svg>
                    <span>ì‚¬ìš© ë°©ë²•</span>
                </div>
                <button class="video-btn" data-testid="button-tutorial-video">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    <span>6ë¶„ ë™ì˜ìƒ ì‹œì²­</span>
                </button>
            </section>

            <!-- ê³ ê° ì§€ì› -->
            <section class="card">
                <div class="section-title">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"/>
                    </svg>
                    <span>ê³ ê° ì§€ì›</span>
                </div>
                <div class="menu-item" data-testid="menu-bug-report">
                    <div class="flex items-center gap-3">
                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 12.75c1.148 0 2.278.08 3.383.237 1.037.146 1.866.966 1.866 2.013 0 3.728-2.35 6.75-5.25 6.75S6.75 18.728 6.75 15c0-1.046.83-1.867 1.866-2.013A24.204 24.204 0 0112 12.75zm0 0c2.883 0 5.647.508 8.207 1.44a23.91 23.91 0 01-1.152 6.06M12 12.75c-2.883 0-5.647.508-8.208 1.44.125 2.104.52 4.136 1.153 6.06M12 12.75a2.25 2.25 0 002.248-2.354M12 12.75a2.25 2.25 0 01-2.248-2.354M12 8.25c.995 0 1.971-.08 2.922-.236.403-.066.74-.358.795-.762a3.778 3.778 0 00-.399-2.25M12 8.25c-.995 0-1.97-.08-2.922-.236-.402-.066-.74-.358-.795-.762a3.734 3.734 0 01.4-2.253M12 8.25a2.25 2.25 0 00-2.248 2.146M12 8.25a2.25 2.25 0 012.248 2.146M8.683 5a6.032 6.032 0 01-1.155-1.002c.07-.63.27-1.222.574-1.747m.581 2.749A3.75 3.75 0 0115.318 5m0 0c.427-.283.815-.62 1.155-.999a4.471 4.471 0 00-.575-1.752M4.921 6a24.048 24.048 0 00-.392 3.314c1.668.546 3.416.914 5.223 1.082M19.08 6c.205 1.08.337 2.187.392 3.314a23.882 23.882 0 01-5.223 1.082"/>
                        </svg>
                        <span class="text-gray-700">ë²„ê·¸ ì‹ ê³ </span>
                    </div>
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
                    </svg>
                </div>
                <div class="menu-item" data-testid="menu-feature-request">
                    <div class="flex items-center gap-3">
                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"/>
                        </svg>
                        <span class="text-gray-700">ê¸°ëŠ¥ ìš”ì²­</span>
                    </div>
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
                    </svg>
                </div>
                <div class="menu-item" data-testid="menu-payment-inquiry">
                    <div class="flex items-center gap-3">
                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z"/>
                        </svg>
                        <span class="text-gray-700">ê²°ì œ ë¬¸ì˜</span>
                    </div>
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
                    </svg>
                </div>
            </section>

            <!-- ì´ìš© ì•½ê´€ -->
            <section class="card">
                <div class="section-title">
                    <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"/>
                    </svg>
                    <span>ì´ìš© ì•½ê´€</span>
                </div>
                <div class="menu-item" data-testid="menu-terms">
                    <div class="flex items-center gap-3">
                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"/>
                        </svg>
                        <span class="text-gray-700">ì´ìš© ì•½ê´€</span>
                    </div>
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
                    </svg>
                </div>
                <div class="menu-item" data-testid="menu-privacy">
                    <div class="flex items-center gap-3">
                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"/>
                        </svg>
                        <span class="text-gray-700">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</span>
                    </div>
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/>
                    </svg>
                </div>
            </section>

            <!-- ì•± ë²„ì „ -->
            <section class="card">
                <div class="flex items-center gap-3">
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"/>
                    </svg>
                    <span class="text-gray-500">ì•± ë²„ì „ v1.0.0</span>
                </div>
            </section>
        </main>
    </div>

    <!-- Google Translate API ìŠ¤í¬ë¦½íŠ¸ -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'ko',
                includedLanguages: 'ko,en,ja,zh-CN,fr,de,es',
                autoDisplay: false
            }, 'google_translate_element');
        }
    </script>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script>
        // ì–¸ì–´ ì½”ë“œ â†’ TTS ì–¸ì–´ ì½”ë“œ ë§¤í•‘
        const langToTTS = {
            'ko': 'ko-KR',
            'en': 'en-US',
            'ja': 'ja-JP',
            'zh-CN': 'zh-CN',
            'fr': 'fr-FR',
            'de': 'de-DE',
            'es': 'es-ES'
        };

        // í˜„ì¬ ì„ íƒëœ ì–¸ì–´
        let currentLang = 'ko';
        
        // TTS ìŒì„± ë¡œë“œ
        let voices = [];
        function loadVoices() {
            voices = window.speechSynthesis.getVoices();
            console.log('Available voices:', voices.length);
        }
        window.speechSynthesis.onvoiceschanged = loadVoices;
        loadVoices();

        // ì–¸ì–´ ì„ íƒ ë³€ê²½ ì‹œ Google Translate íŠ¸ë¦¬ê±°
        document.getElementById('languageSelect').addEventListener('change', function(e) {
            const selectedLang = e.target.value;
            currentLang = selectedLang;
            
            console.log('Language selected:', selectedLang);
            
            // localStorageì— ì–¸ì–´ ì €ì¥ (AI í”„ë¡¬í”„íŠ¸ì—ì„œ ì‚¬ìš©)
            localStorage.setItem('selectedLanguage', selectedLang);
            
            // Google Translate ì¿ í‚¤ ì„¤ì •
            const domain = window.location.hostname;
            document.cookie = `googtrans=/ko/${selectedLang}; path=/; domain=${domain}`;
            document.cookie = `googtrans=/ko/${selectedLang}; path=/`;
            
            // Google Translate ë“œë¡­ë‹¤ìš´ ì°¾ì•„ì„œ ê°’ ë³€ê²½
            setTimeout(() => {
                const selectField = document.querySelector("select.goog-te-combo");
                if (selectField) {
                    selectField.value = selectedLang;
                    selectField.dispatchEvent(new Event('change'));
                    console.log('Google Translate triggered for:', selectedLang);
                    
                    // ë²ˆì—­ ìƒíƒœ í‘œì‹œ
                    if (selectedLang !== 'ko') {
                        document.getElementById('translationStatus').classList.remove('hidden');
                    } else {
                        document.getElementById('translationStatus').classList.add('hidden');
                    }
                } else {
                    console.log('Google Translate dropdown not found, reloading...');
                    // í˜ì´ì§€ ë¦¬ë¡œë“œë¡œ ë²ˆì—­ ì ìš©
                    window.location.reload();
                }
            }, 500);
        });

        // TTS í…ŒìŠ¤íŠ¸ ë²„íŠ¼
        document.getElementById('ttsTestBtn').addEventListener('click', function() {
            // í˜„ì¬ í‘œì‹œëœ (ë²ˆì—­ëœ) í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°
            const textElement = document.getElementById('sampleText');
            const text = textElement.textContent || textElement.innerText;
            
            console.log('TTS Text:', text);
            console.log('Current Lang:', currentLang);
            
            // ê¸°ì¡´ ìŒì„± ì •ì§€
            window.speechSynthesis.cancel();
            
            // ìƒˆ ìŒì„± ìƒì„±
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = langToTTS[currentLang] || 'ko-KR';
            utterance.rate = 0.9;
            utterance.pitch = 1;
            
            // ì ì ˆí•œ ìŒì„± ì°¾ê¸°
            const targetVoice = voices.find(v => v.lang.startsWith(currentLang) || v.lang === langToTTS[currentLang]);
            if (targetVoice) {
                utterance.voice = targetVoice;
                console.log('Using voice:', targetVoice.name);
            }
            
            // ìƒíƒœ í‘œì‹œ
            const statusEl = document.getElementById('ttsStatus');
            const statusText = document.getElementById('ttsStatusText');
            statusEl.classList.remove('hidden');
            statusText.textContent = 'ğŸ”Š ì¬ìƒ ì¤‘...';
            
            utterance.onend = function() {
                statusText.textContent = 'âœ… ì¬ìƒ ì™„ë£Œ!';
                setTimeout(() => {
                    statusEl.classList.add('hidden');
                }, 2000);
            };
            
            utterance.onerror = function(e) {
                console.error('TTS Error:', e);
                statusText.textContent = 'âŒ ì¬ìƒ ì‹¤íŒ¨';
            };
            
            // ìŒì„± ì¬ìƒ
            window.speechSynthesis.speak(utterance);
        });

        // ë²ˆì—­ ìƒíƒœ ê°ì§€ (MutationObserver)
        const observer = new MutationObserver((mutations) => {
            const htmlEl = document.documentElement;
            const isTranslated = htmlEl.classList.contains('translated-ltr') || 
                               htmlEl.classList.contains('translated-rtl');
            
            if (isTranslated) {
                console.log('Page translated!');
                document.getElementById('translationStatus').classList.remove('hidden');
                
                // ë²ˆì—­ ì–¸ì–´ ê°ì§€
                const langSelect = document.querySelector('.goog-te-combo');
                if (langSelect && langSelect.value) {
                    currentLang = langSelect.value;
                    console.log('Detected translated language:', currentLang);
                }
            }
        });

        observer.observe(document.documentElement, {
            attributes: true,
            attributeFilter: ['class']
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ì–¸ì–´ ë³µì›
        window.addEventListener('load', function() {
            // ì¿ í‚¤ì—ì„œ ì–¸ì–´ í™•ì¸
            const googtrans = document.cookie.split('; ').find(row => row.startsWith('googtrans='));
            if (googtrans) {
                const lang = googtrans.split('/').pop();
                if (lang && lang !== 'ko') {
                    document.getElementById('languageSelect').value = lang;
                    currentLang = lang;
                }
            }
        });
    </script>
</body>
</html>
