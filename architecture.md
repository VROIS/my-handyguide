# ë‚´ì†ê°€ì´ë“œ ì•± ì•„í‚¤í…ì²˜ ì™„ì „ ê°€ì´ë“œ
> **ì‘ì„±ì¼:** 2025-11-09  
> **ëª©ì :** AI ì—ì´ì „íŠ¸ì™€ ê°œë°œìê°€ ì•± êµ¬ì¡°ë¥¼ ì •í™•íˆ ì´í•´í•˜ê³  ì‹œí–‰ì°©ì˜¤ ì—†ì´ ì‘ì—…í•˜ê¸° ìœ„í•¨

---

## ğŸ“ ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤                         â”‚
â”‚                    (Vanilla JS, Tailwind CSS)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ğŸ  Features Page (ì¶”ì²œ ê°¤ëŸ¬ë¦¬)                                 â”‚
â”‚  ğŸ“¸ Main Page (ì¹´ë©”ë¼)                                          â”‚
â”‚  ğŸ“ Detail Page (ìƒì„¸ ë·° + ìŒì„±)                                â”‚
â”‚  ğŸ“š Archive Page (ë³´ê´€í•¨)                                       â”‚
â”‚  âš™ï¸  Settings Page (ì„¤ì •)                                       â”‚
â”‚  ğŸ”— Share Page (ë…ë¦½ HTML - ì˜¤í”„ë¼ì¸ ì§€ì›)                      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ REST API (Express)
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Backend Server                            â”‚
â”‚                    (Express + TypeScript)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ğŸ” Authentication (Replit Auth, Google OAuth, Kakao OAuth)     â”‚
â”‚  ğŸ¤– AI Integration (Google Gemini 2.5 Flash)                    â”‚
â”‚  ğŸ“¤ File Upload (Multer + Image Compression)                    â”‚
â”‚  ğŸ”— Share System (HTML Generator + Service Worker)              â”‚
â”‚  ğŸ‘‘ Admin Dashboard (í†µê³„ + Featured ê´€ë¦¬)                      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ Drizzle ORM
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PostgreSQL Database                          â”‚
â”‚                         (Neon)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ğŸ“Š users              ì‚¬ìš©ì ì •ë³´                              â”‚
â”‚  ğŸ“ guides             ì—¬í–‰ ê°€ì´ë“œ                              â”‚
â”‚  ğŸ”— shareLinks         ê³µìœ  ë§í¬ (êµ¬ë²„ì „)                       â”‚
â”‚  ğŸ“„ sharedHtmlPages    ê³µìœ  HTML í˜ì´ì§€ (ì‹ ë²„ì „)                â”‚
â”‚  ğŸ’³ creditTransactions í¬ë ˆë”§ ê±°ë˜                              â”‚
â”‚  ğŸ”‘ sessions           ì„¸ì…˜ ì €ì¥ì†Œ                              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ºï¸ í˜ì´ì§€ êµ¬ì¡° ë° ë„¤ë¹„ê²Œì´ì…˜

### 1. **Features Page** (ì¶”ì²œ ê°¤ëŸ¬ë¦¬)
**íŒŒì¼:** `public/index.js` (featuresPage)  
**ëª©ì :** ì¶”ì²œ ê³µìœ  í˜ì´ì§€ ê°¤ëŸ¬ë¦¬ í‘œì‹œ

**ì£¼ìš” ë²„íŠ¼:**
```javascript
#startCameraFromFeaturesBtn  // "ì¹´ë©”ë¼ ì‹œì‘" â†’ Main Page ì´ë™
#archiveBtn                   // "ë³´ê´€í•¨" â†’ Archive Page ì´ë™
Featured Gallery ì•„ì´í…œ í´ë¦­  // ê³µìœ  í˜ì´ì§€ ìƒˆ ì°½ ì˜¤í”ˆ (ë¹„ë¡œê·¸ì¸: ì¸ì¦ ëª¨ë‹¬)
```

**ë™ì‘:**
1. ë¡œê·¸ì¸ ì•ˆ í•œ ì‚¬ìš©ì: Featured Galleryë§Œ í‘œì‹œ
2. Featured ì•„ì´í…œ í´ë¦­ ì‹œ:
   - âœ… ë¡œê·¸ì¸: ê³µìœ  í˜ì´ì§€ ìƒˆ ì°½ ì˜¤í”ˆ
   - âŒ ë¹„ë¡œê·¸ì¸: ì¸ì¦ ëª¨ë‹¬ í‘œì‹œ â†’ ë¡œê·¸ì¸ í›„ í˜ì´ì§€ ì˜¤í”ˆ

---

### 2. **Main Page** (ì¹´ë©”ë¼)
**íŒŒì¼:** `public/index.js` (mainPage)  
**ëª©ì :** ì‚¬ì§„ ì´¬ì˜ ë° ì—…ë¡œë“œ

**ì£¼ìš” ë²„íŠ¼:**
```javascript
#shootBtn   // ì¹´ë©”ë¼ ì´¬ì˜ â†’ Detail Page (AI ë¶„ì„)
#uploadBtn  // íŒŒì¼ ì—…ë¡œë“œ â†’ Detail Page (AI ë¶„ì„)
#micBtn     // ìŒì„± ë…¹ìŒ (í˜„ì¬ ë¯¸ì‚¬ìš©)
#archiveBtn // ë³´ê´€í•¨ â†’ Archive Page ì´ë™
```

**ë™ì‘ í”Œë¡œìš°:**
```
1. ì´¬ì˜/ì—…ë¡œë“œ í´ë¦­
   â†“
2. ì´ë¯¸ì§€ ì••ì¶• (0.9 quality)
   â†“
3. Gemini AI ë¶„ì„ (/api/gemini)
   â†“
4. Detail Page í‘œì‹œ (ì´ë¯¸ì§€ + ì„¤ëª… + ìŒì„±)
```

---

### 3. **Detail Page** (ìƒì„¸ ë·°)
**íŒŒì¼:** `public/index.js` (detailPage)  
**ëª©ì :** AI ìƒì„± ì½˜í…ì¸  + ìŒì„± ì¬ìƒ

**ì£¼ìš” ë²„íŠ¼:**
```javascript
#backBtn          // ë’¤ë¡œê°€ê¸° â†’ Main Page ë³µê·€ (ìŒì„± ì •ì§€)
#audioBtn         // ìŒì„± ì¬ìƒ/ì •ì§€ í† ê¸€
#textToggleBtn    // í…ìŠ¤íŠ¸ ì˜¤ë²„ë ˆì´ í‘œì‹œ/ìˆ¨ê¹€
#saveBtn          // IndexedDB ì €ì¥ â†’ Archive Page ì´ë™
```

**ìŒì„± ì¬ìƒ ë¡œì§:**
- Web Speech API (window.speechSynthesis)
- Microsoft Heami ìŒì„± ê°•ì œ ì§€ì •
- í˜ì´ì§€ ì´íƒˆ ì‹œ ìë™ ì •ì§€ (beforeunload ì´ë²¤íŠ¸)

---

### 4. **Archive Page** (ë³´ê´€í•¨)
**íŒŒì¼:** `public/index.js` (archivePage)  
**ëª©ì :** ì €ì¥ëœ ê°€ì´ë“œ ê´€ë¦¬ + ê³µìœ 

**ì£¼ìš” ë²„íŠ¼:**
```javascript
#archiveBackBtn       // ë’¤ë¡œê°€ê¸° â†’ Features Page ë³µê·€
#archiveSelectBtn     // ì„ íƒ ëª¨ë“œ í™œì„±í™”
#archiveShareBtn      // ì„ íƒí•œ ì•„ì´í…œ ê³µìœ  â†’ ê³µìœ  ëª¨ë‹¬
#archiveDeleteBtn     // ì„ íƒí•œ ì•„ì´í…œ ì‚­ì œ
#archiveSettingsBtn   // ì„¤ì • í˜ì´ì§€ ì´ë™
#cancelSelectionBtn   // ì„ íƒ ëª¨ë“œ ì·¨ì†Œ
#deleteSelectedBtn    // ì„ íƒëœ ì•„ì´í…œ ì‚­ì œ
ì•„ì´í…œ í´ë¦­           // Detail Page (ì½ê¸° ì „ìš©)
```

**ê³µìœ  í”Œë¡œìš°:**
```
1. ì•„ì´í…œ 1ê°œ ì´ìƒ ì„ íƒ
   â†“
2. "ê³µìœ " ë²„íŠ¼ í´ë¦­
   â†“
3. ì œëª© ì…ë ¥ ëª¨ë‹¬
   â†“
4. /api/share/create (HTML ìƒì„± + DB ì €ì¥)
   â†“
5. ê³µìœ  ë§í¬ ìƒì„±: /s/abc12345
   â†“
6. í´ë¦½ë³´ë“œ ë³µì‚¬ + í† ìŠ¤íŠ¸ ë©”ì‹œì§€
```

---

### 5. **Settings Page** (ì„¤ì •)
**íŒŒì¼:** `public/index.js` (settingsPage)  
**ëª©ì :** ì‚¬ìš©ì ì„¤ì • ê´€ë¦¬

**ì£¼ìš” ë²„íŠ¼:**
```javascript
#settingsBackBtn      // ë’¤ë¡œê°€ê¸° â†’ Archive Page ë³µê·€
#languageToggle       // ì–¸ì–´ ì„ íƒ (í•œêµ­ì–´/English)
#locationToggle       // ìœ„ì¹˜ ì •ë³´ ì‚¬ìš© ì—¬ë¶€
#aiContentToggle      // AI ì½˜í…ì¸  ìƒì„± ì—¬ë¶€
#logoutBtn            // ë¡œê·¸ì•„ì›ƒ
#deleteAccountBtn     // ê³„ì • ì‚­ì œ
```

---

### 6. **Share Page** (ê³µìœ  í˜ì´ì§€)
**íŒŒì¼:** `public/shared/*.html` (ë…ë¦½ HTML)  
**ëª©ì :** ì˜¤í”„ë¼ì¸ ì§€ì› ì˜êµ¬ ì—¬í–‰ ì¼ê¸°

**í˜ì´ì§€ êµ¬ì¡°:**
```html
<!-- í—¤ë” -->
<div class="header">
  <h1>ì œëª©</h1>
  <p>ğŸ‘¤ ë°œì‹ ì ì´ë¦„</p>
  <p>ğŸ“ ìœ„ì¹˜</p>
  <p>ğŸ“… ë‚ ì§œ</p>
</div>

<!-- ê°¤ëŸ¬ë¦¬ ë·° (ê¸°ë³¸) -->
<div id="gallery-view">
  <!-- Featured ì „ìš© ë¦¬í„´ ë²„íŠ¼ (ì™¼ìª½ ìƒë‹¨) -->
  <button>â† ë³´ê´€í•¨ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
  
  <!-- ê°¤ëŸ¬ë¦¬ ê·¸ë¦¬ë“œ -->
  <div class="gallery-grid">
    <img> <!-- í´ë¦­ â†’ ìƒì„¸ ë·° -->
  </div>
  
  <!-- í•˜ë‹¨ í™ˆ ë²„íŠ¼ -->
  <a id="home-button">ì†ì•ˆì— ê°€ì´ë“œ ì‹œì‘í•˜ê¸°</a> âœ… ìŒì„± ì •ì§€ í›„ ì´ë™
</div>

<!-- ìƒì„¸ ë·° (hidden) -->
<div id="detail-view">
  <!-- í—¤ë”: ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
  <button id="detail-back">â†</button> âœ… ìŒì„± ì •ì§€ + ê°¤ëŸ¬ë¦¬ ë³µê·€
  
  <!-- ë°°ê²½ ì´ë¯¸ì§€ -->
  <img id="detail-bg">
  
  <!-- í…ìŠ¤íŠ¸ ì˜¤ë²„ë ˆì´ -->
  <div id="detail-text">
    <p id="detail-description"></p>
  </div>
  
  <!-- í•˜ë‹¨ Footer -->
  <footer id="detail-footer">
    <button id="detail-audio">ğŸ”Š/â¸</button>  <!-- ìŒì„± ì¬ìƒ/ì •ì§€ -->
    <button id="text-toggle">ğŸ“„</button>      <!-- í…ìŠ¤íŠ¸ í‘œì‹œ/ìˆ¨ê¹€ -->
    <a id="detail-home">ğŸ </a>                <!-- âœ… ìŒì„± ì •ì§€ í›„ ì•± ì´ë™ -->
  </footer>
</div>
```

**âš ï¸ ìŒì„± ì •ì§€ ì¤‘ìš” ë²„íŠ¼:**
```javascript
#detail-back   // ê°¤ëŸ¬ë¦¬ ë³µê·€ (ìŒì„± ì •ì§€ O)
#detail-home   // ì•±ìœ¼ë¡œ ì´ë™ (ìŒì„± ì •ì§€ O) â† ìµœê·¼ ìˆ˜ì •!
#home-button   // ê°¤ëŸ¬ë¦¬ í•˜ë‹¨ í™ˆ (ìŒì„± ì •ì§€ O)
```

**Service Worker:**
- Cache-First ì „ëµ
- ì˜¤í”„ë¼ì¸ ì˜êµ¬ ë³´ê´€
- `/sw-share.js` ë“±ë¡

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### **users** (ì‚¬ìš©ì)
```typescript
id: varchar (UUID)           // ì‚¬ìš©ì ID
email: varchar (unique)      // ì´ë©”ì¼
firstName: varchar           // ì´ë¦„
lastName: varchar            // ì„±
profileImageUrl: varchar     // í”„ë¡œí•„ ì´ë¯¸ì§€
provider: varchar            // replit | google | kakao
preferredLanguage: varchar   // ko | en
locationEnabled: boolean     // ìœ„ì¹˜ ì •ë³´ ì‚¬ìš© ì—¬ë¶€
aiContentEnabled: boolean    // AI ì½˜í…ì¸  ìƒì„± ì—¬ë¶€
credits: integer             // í¬ë ˆë”§ (ë¯¸ë˜ ê¸°ëŠ¥)
isAdmin: boolean             // ê´€ë¦¬ì ì—¬ë¶€
subscriptionStatus: varchar  // active | canceled
createdAt: timestamp
updatedAt: timestamp
```

### **guides** (ì—¬í–‰ ê°€ì´ë“œ)
```typescript
id: varchar (UUID)           // ê°€ì´ë“œ ID
userId: varchar â†’ users.id   // ì‘ì„±ì
title: text                  // ì œëª©
description: text            // ì„¤ëª…
imageUrl: text               // ì´ë¯¸ì§€ ê²½ë¡œ
latitude: decimal            // GPS ìœ„ë„
longitude: decimal           // GPS ê²½ë„
locationName: text           // ìœ„ì¹˜ ì´ë¦„
aiGeneratedContent: text     // AI ìƒì„± ì½˜í…ì¸ 
viewCount: integer           // ì¡°íšŒìˆ˜
language: varchar            // ko | en
createdAt: timestamp
updatedAt: timestamp
```

### **sharedHtmlPages** (ê³µìœ  í˜ì´ì§€) â­ í•µì‹¬!
```typescript
id: varchar (8ì)            // ì§§ì€ ID (abc12345)
userId: varchar â†’ users.id   // ìƒì„±ì
name: text                   // ê³µìœ  í˜ì´ì§€ ì œëª©
htmlContent: text            // (êµ¬) ì™„ì „í•œ HTML (nullable)
htmlFilePath: text           // (ì‹ ) HTML íŒŒì¼ ê²½ë¡œ /shared/abc12345.html
guideIds: text[]             // í¬í•¨ëœ ê°€ì´ë“œ ID ë°°ì—´
thumbnail: text              // ì¸ë„¤ì¼ ì´ë¯¸ì§€
sender: text                 // ë°œì‹ ì ì´ë¦„ (nullable)
location: text               // ìœ„ì¹˜ ì •ë³´ (nullable)
date: text                   // ê³µìœ  ë‚ ì§œ (YYYY-MM-DD)
featured: boolean            // ì¶”ì²œ ê°¤ëŸ¬ë¦¬ í‘œì‹œ
featuredOrder: integer       // Featured ìˆœì„œ (í´ë¦­ ìˆœì„œëŒ€ë¡œ 1, 2, 3...)
downloadCount: integer       // ì¡°íšŒìˆ˜
isActive: boolean            // í™œì„±í™” ìƒíƒœ
createdAt: timestamp
updatedAt: timestamp
```

**âš ï¸ ì¤‘ìš”:** `htmlFilePath`ë¡œ HTML íŒŒì¼ì„ ì €ì¥í•˜ì—¬ DB ìš©ëŸ‰ 78% ì ˆê° (184MB â†’ 39MB)

---

## ğŸ”Œ API ì—”ë“œí¬ì¸íŠ¸

### **ì¸ì¦ (Authentication)**
```
GET  /api/auth/user          ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ
GET  /api/auth/logout        ë¡œê·¸ì•„ì›ƒ
GET  /auth/google            Google OAuth ë¦¬ë‹¤ì´ë ‰íŠ¸
GET  /auth/google/callback   Google OAuth ì½œë°±
GET  /auth/kakao             Kakao OAuth ë¦¬ë‹¤ì´ë ‰íŠ¸ (ì¤€ë¹„ ì¤‘)
GET  /auth/kakao/callback    Kakao OAuth ì½œë°± (ì¤€ë¹„ ì¤‘)
```

### **ê°€ì´ë“œ (Guides)**
```
GET    /api/guides           ì‚¬ìš©ì ê°€ì´ë“œ ëª©ë¡
POST   /api/guides           ê°€ì´ë“œ ìƒì„± (ì´ë¯¸ì§€ ì—…ë¡œë“œ í¬í•¨)
GET    /api/guides/:id       ê°€ì´ë“œ ìƒì„¸
DELETE /api/guides/:id       ê°€ì´ë“œ ì‚­ì œ
```

### **ê³µìœ  (Share)**
```
POST /api/share/create       ê³µìœ  í˜ì´ì§€ ìƒì„± (HTML íŒŒì¼ ì €ì¥)
GET  /s/:id                  ê³µìœ  í˜ì´ì§€ ì ‘ì† (HTML íŒŒì¼ ì œê³µ)
GET  /api/share/:id          ê³µìœ  í˜ì´ì§€ ë°ì´í„° ì¡°íšŒ
GET  /api/share/featured/list Featured ê°¤ëŸ¬ë¦¬ ëª©ë¡ (5ë¶„ ìºì‹œ)
```

### **AI (Gemini)**
```
POST /api/gemini             ì´ë¯¸ì§€ ë¶„ì„ + ì„¤ëª… ìƒì„±
```

### **ê´€ë¦¬ì (Admin)**
```
POST   /api/admin/auth                ê´€ë¦¬ì ì¸ì¦ (ë¹„ë°€ë²ˆí˜¸: 1234)
GET    /api/admin/shares              ê³µìœ  í˜ì´ì§€ ê²€ìƒ‰
GET    /api/admin/all-shares          ì „ì²´ ê³µìœ  í˜ì´ì§€ ëª©ë¡
GET    /api/admin/featured            Featured ëª©ë¡
POST   /api/admin/featured/:id        Featured ì¶”ê°€ (ìë™ ìˆœì„œ ì§€ì •)
DELETE /api/admin/featured/:id        Featured ì œê±°
POST   /api/admin/featured/:id/regenerate  HTML ì¬ìƒì„±
GET    /api/admin/stats               í†µê³„ (ì‚¬ìš©ì, ê°€ì´ë“œ, ê³µìœ , ì¡°íšŒìˆ˜)
GET    /api/admin/analytics           7ì¼ íŠ¸ë Œë“œ ë¶„ì„
```

### **ì„¤ì • (User Preferences)**
```
PATCH /api/user/preferences  ì‚¬ìš©ì ì„¤ì • ì—…ë°ì´íŠ¸
```

### **Service Worker**
```
GET /sw-share.js             Service Worker íŒŒì¼
```

---

## ğŸ¨ ì£¼ìš” ê¸°ëŠ¥ í”Œë¡œìš°

### **1. ì‚¬ì§„ ì´¬ì˜ â†’ AI ë¶„ì„ â†’ ì €ì¥**
```
Main Page
  â†“ ì´¬ì˜/ì—…ë¡œë“œ
Image Compression (0.9 quality)
  â†“
POST /api/gemini (Gemini 2.5 Flash)
  â†“ AI ë¶„ì„ (2-2.5ì´ˆ)
Detail Page (ì´ë¯¸ì§€ + ì„¤ëª… + ìŒì„±)
  â†“ ì €ì¥ ë²„íŠ¼
IndexedDB ì €ì¥
  â†“
Archive Page (ë³´ê´€í•¨)
```

### **2. ê³µìœ  í˜ì´ì§€ ìƒì„±**
```
Archive Page
  â†“ ì•„ì´í…œ ì„ íƒ
ì„ íƒ ëª¨ë“œ í™œì„±í™”
  â†“ ê³µìœ  ë²„íŠ¼
ì œëª© ì…ë ¥ ëª¨ë‹¬
  â†“
POST /api/share/create
  â”œâ”€ generateShareHTML() ì‹¤í–‰ (public/index.js)
  â”œâ”€ HTML íŒŒì¼ ìƒì„± (/public/shared/abc12345.html)
  â”œâ”€ DB ì €ì¥ (sharedHtmlPages í…Œì´ë¸”)
  â””â”€ ì§§ì€ URL ë°˜í™˜ (/s/abc12345)
  â†“
í´ë¦½ë³´ë“œ ë³µì‚¬ + í† ìŠ¤íŠ¸
```

### **3. ê³µìœ  í˜ì´ì§€ ì ‘ì† (ì˜¤í”„ë¼ì¸ ì§€ì›)**
```
/s/abc12345 ì ‘ì†
  â†“
Service Worker í™•ì¸
  â”œâ”€ ìºì‹œ ìˆìŒ â†’ ì¦‰ì‹œ í‘œì‹œ (0ms)
  â””â”€ ìºì‹œ ì—†ìŒ â†’ ì„œë²„ ìš”ì²­
       â†“
  GET /s/:id â†’ HTML íŒŒì¼ ì œê³µ
       â†“
  Service Worker ìºì‹œ ì €ì¥
       â†“
  ì˜¤í”„ë¼ì¸ ì˜êµ¬ ë³´ê´€ ì™„ë£Œ
```

### **4. Featured ê°¤ëŸ¬ë¦¬ ê´€ë¦¬ (ê´€ë¦¬ì)**
```
Admin Dashboard (/admin-dashboard.html)
  â†“ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (1234)
POST /api/admin/auth
  â†“
ê³µìœ  í˜ì´ì§€ ê²€ìƒ‰
  â†“ Featured ì¶”ê°€
POST /api/admin/featured/:id
  â”œâ”€ featuredOrder ìë™ ì§€ì • (í´ë¦­ ìˆœì„œëŒ€ë¡œ 1, 2, 3...)
  â””â”€ DB ì—…ë°ì´íŠ¸
  â†“
Featured Gallery í‘œì‹œ (localStorage 5ë¶„ ìºì‹œ)
```

---

## ğŸ”§ í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ

### **Frontend**
- **JavaScript:** Vanilla JS (No Framework)
- **CSS:** Tailwind CSS (CDN)
- **Storage:** IndexedDB (dexie.js)
- **PWA:** Service Worker (ì˜¤í”„ë¼ì¸ ì§€ì›)
- **ìŒì„±:** Web Speech API (speechSynthesis)

### **Backend**
- **Framework:** Express.js + TypeScript
- **ORM:** Drizzle ORM
- **Database:** PostgreSQL (Neon)
- **ì¸ì¦:** Passport.js (Replit Auth, Google OAuth, Kakao OAuth)
- **íŒŒì¼ ì—…ë¡œë“œ:** Multer + Sharp (ì´ë¯¸ì§€ ì••ì¶•)
- **AI:** Google Gemini 2.5 Flash

### **Build Tools**
- **Frontend:** Vite
- **Backend:** ESBuild + tsx

---

## ğŸš¨ ë³´í˜¸ëœ ì½”ë“œ (ìˆ˜ì • ê¸ˆì§€)

### **1. generateShareHTML() í•¨ìˆ˜ (public/index.js)**
- **ìœ„ì¹˜:** 373ë²ˆ ì¤„
- **ëª©ì :** ê³µìœ  í˜ì´ì§€ HTML ìƒì„±
- **ë³´í˜¸ ì´ìœ :** ì‚¬ìš©ìê°€ 4ì‹œê°„ íˆ¬ìí•œ ì›ë³¸ ë¡œì§
- **ìˆ˜ì • ì‹œ ì˜í–¥:**
  - ê³µìœ  í˜ì´ì§€ ë””ìì¸ ê¹¨ì§
  - ì˜¤í”„ë¼ì¸ ê¸°ëŠ¥ ì†ìƒ
  - ìŒì„± ì¬ìƒ ë²„ê·¸

### **2. ìŒì„± ì •ì§€ ë¡œì§**
- **ìœ„ì¹˜:** public/index.js
  - `stopAudio()` í•¨ìˆ˜ (841-853ë²ˆ ì¤„)
  - `#detail-back` ì´ë²¤íŠ¸ (960ë²ˆ ì¤„)
  - `#detail-home` ì´ë²¤íŠ¸ (1000ë²ˆ ì¤„)
  - `#home-button` ì´ë²¤íŠ¸ (988ë²ˆ ì¤„)
- **í•µì‹¬:** í˜ì´ì§€ ì´íƒˆ ì‹œ `synth.pause()` + `synth.cancel()` + 200ms setTimeout

### **3. sharedHtmlPages í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ**
- **ìœ„ì¹˜:** shared/schema.ts (139-156ë²ˆ ì¤„)
- **ë³´í˜¸ ì´ìœ :** 8ì‹œê°„ ì‘ì—… ê²°ê³¼ë¬¼
- **ìˆ˜ì • ì‹œ ì˜í–¥:**
  - ì§§ì€ URL ì‹œìŠ¤í…œ íŒŒê´´
  - ê³µìœ  ë§í¬ ìƒì„± ì‹¤íŒ¨
  - DB êµ¬ì¡° ì†ìƒ

### **4. KakaoTalk In-App Browser Fix**
- **ìœ„ì¹˜:** Service Worker + UserAgent ê°ì§€
- **ë³´í˜¸ ì´ìœ :** Galaxy ì‚¬ìš©ì í•µì‹¬ UX
- **ê¸°ëŠ¥:** ì¹´í†¡ ë¸Œë¼ìš°ì € ê°ì§€ â†’ Chrome ê°•ì œ ë¦¬ë‹¤ì´ë ‰íŠ¸

### **5. Admin Dashboard**
- **ìœ„ì¹˜:** public/admin-dashboard.html
- **ë³´í˜¸ ì´ìœ :** ë¹„ì¦ˆë‹ˆìŠ¤ í•µì‹¬ ê¸°ëŠ¥
- **ë¹„ë°€ë²ˆí˜¸:** 1234 (ë³€ê²½ ê¸ˆì§€)
- **ê¸°ëŠ¥:**
  - ì‹¤ì‹œê°„ í†µê³„ (KPI)
  - Featured ê´€ë¦¬
  - ê³µìœ  í˜ì´ì§€ ê²€ìƒ‰
  - HTML ì¬ìƒì„±

---

## ğŸ“ ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

### **ë²„íŠ¼ ìˆ˜ì • ì‹œ**
1. âœ… ì–´ëŠ í˜ì´ì§€ì˜ ë²„íŠ¼ì¸ì§€ í™•ì¸ (Features/Main/Detail/Archive/Settings/Share)
2. âœ… ë²„íŠ¼ ID í™•ì¸ (`getElementById('xxx')`)
3. âœ… ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ í™•ì¸ (`addEventListener`)
4. âœ… ìŒì„± ì¬ìƒ ì¤‘ì¸ê°€? â†’ `stopAudio()` í˜¸ì¶œ í•„ìš”
5. âœ… í˜ì´ì§€ ì´ë™í•˜ëŠ”ê°€? â†’ `setTimeout` 200ms ì ìš©
6. âœ… Share Page ìˆ˜ì •ì¸ê°€? â†’ `generateShareHTML()` í•¨ìˆ˜ ìˆ˜ì •
7. âœ… ìƒˆ ê³µìœ  í˜ì´ì§€ë¡œ í…ŒìŠ¤íŠ¸ (ìºì‹œ ì£¼ì˜!)

### **API ìˆ˜ì • ì‹œ**
1. âœ… ì¸ì¦ í•„ìš”? â†’ `isAuthenticated` ë¯¸ë“¤ì›¨ì–´
2. âœ… ê´€ë¦¬ì ì „ìš©? â†’ `requireAdmin` ë¯¸ë“¤ì›¨ì–´
3. âœ… íŒŒì¼ ì—…ë¡œë“œ? â†’ `upload.single('image')` ë¯¸ë“¤ì›¨ì–´
4. âœ… DB ì ‘ê·¼? â†’ Drizzle ORM ì‚¬ìš©
5. âœ… ì—ëŸ¬ ì²˜ë¦¬? â†’ try-catch + 500 ì‘ë‹µ

### **DB ìŠ¤í‚¤ë§ˆ ìˆ˜ì • ì‹œ**
1. âœ… ê¸°ì¡´ ë°ì´í„° í˜¸í™˜ì„± í™•ì¸
2. âœ… Primary Key íƒ€ì… ì ˆëŒ€ ë³€ê²½ ê¸ˆì§€
3. âœ… `npm run db:push --force` ì‹¤í–‰
4. âœ… ìˆ˜ë™ ë§ˆì´ê·¸ë ˆì´ì…˜ ê¸ˆì§€

---

## ğŸ¯ ìì£¼ ë°œìƒí•˜ëŠ” ì‹¤ìˆ˜

### **1. ê³µìœ  í˜ì´ì§€ ìˆ˜ì • í›„ ìºì‹œ ë¬¸ì œ**
- **ë¬¸ì œ:** ê¸°ì¡´ ê³µìœ  í˜ì´ì§€ëŠ” HTMLì´ ì´ë¯¸ ì €ì¥ë¨
- **í•´ê²°:** ìƒˆ ê³µìœ  í˜ì´ì§€ ìƒì„± í›„ í…ŒìŠ¤íŠ¸

### **2. ìŒì„± ì •ì§€ ì•ˆ ë¨**
- **ë¬¸ì œ:** `synth.cancel()` í˜¸ì¶œ í›„ ì¦‰ì‹œ í˜ì´ì§€ ì´ë™
- **í•´ê²°:** `setTimeout(() => { window.location.href = ... }, 200);`

### **3. ë²„íŠ¼ í´ë¦­ ì•ˆ ë¨**
- **ë¬¸ì œ:** `querySelector` vs `getElementById` í˜¼ë™
- **í•´ê²°:** IDëŠ” `getElementById`, ClassëŠ” `querySelector`

### **4. Featured Gallery ìºì‹œ ë¯¸ì ìš©**
- **ë¬¸ì œ:** localStorage ìºì‹œ ë¡œì§ ëˆ„ë½
- **í•´ê²°:** 5ë¶„ ìºì‹œ (localStorage + version hash)

### **5. ê´€ë¦¬ì ê¸°ëŠ¥ ì ‘ê·¼ ë¶ˆê°€**
- **ë¬¸ì œ:** ë¹„ë°€ë²ˆí˜¸ í‹€ë¦¼ ë˜ëŠ” ì„¸ì…˜ ë§Œë£Œ
- **í•´ê²°:** ë¹„ë°€ë²ˆí˜¸ 1234 ì¬ì…ë ¥

---

## ğŸ“š ì°¸ê³  íŒŒì¼ ìœ„ì¹˜

```
í”„ë¡œì íŠ¸ ë£¨íŠ¸/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.js              # ë©”ì¸ ì•± ë¡œì§ (3,400+ ë¼ì¸)
â”‚   â”œâ”€â”€ index.html            # ì•± HTML
â”‚   â”œâ”€â”€ admin-dashboard.html  # ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ service-worker.js     # Service Worker (ì•±ìš©)
â”‚   â”œâ”€â”€ sw-share.js           # Service Worker (ê³µìœ  í˜ì´ì§€ìš©)
â”‚   â””â”€â”€ shared/               # ê³µìœ  HTML íŒŒì¼ ì €ì¥ í´ë”
â”‚       â””â”€â”€ *.html
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ routes.ts             # API ë¼ìš°íŠ¸ (2,000+ ë¼ì¸)
â”‚   â”œâ”€â”€ storage.ts            # ìŠ¤í† ë¦¬ì§€ ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ auth.ts               # ì¸ì¦ ì„¤ì •
â”‚   â””â”€â”€ vite.ts               # Vite ì„œë²„ ì„¤ì •
â”œâ”€â”€ shared/
â”‚   â””â”€â”€ schema.ts             # DB ìŠ¤í‚¤ë§ˆ
â””â”€â”€ replit.md                 # í”„ë¡œì íŠ¸ ê°œìš”
```

---

## ğŸ ê²°ë¡ 

ì´ ë¬¸ì„œëŠ” **AI ì—ì´ì „íŠ¸ì™€ ê°œë°œìê°€ ì•± êµ¬ì¡°ë¥¼ ì™„ë²½íˆ ì´í•´**í•˜ê³ , **ì‹œí–‰ì°©ì˜¤ ì—†ì´ ì‘ì—…**í•˜ê¸° ìœ„í•´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

**í•µì‹¬ ì›ì¹™:**
1. ìˆ˜ì • ì „ ë°˜ë“œì‹œ íŒŒì¼ êµ¬ì¡° í™•ì¸
2. ë³´í˜¸ëœ ì½”ë“œëŠ” ìŠ¹ì¸ ì—†ì´ ì ˆëŒ€ ìˆ˜ì • ê¸ˆì§€
3. í…ŒìŠ¤íŠ¸ëŠ” ìƒˆ ë°ì´í„°ë¡œ ì§„í–‰ (ìºì‹œ ì£¼ì˜)
4. ìŒì„± ê´€ë ¨ ì‘ì—…ì€ `stopAudio()` í•„ìˆ˜

**ë¬¸ì œ ë°œìƒ ì‹œ:**
1. ì´ ë¬¸ì„œì˜ ì²´í¬ë¦¬ìŠ¤íŠ¸ í™•ì¸
2. ê´€ë ¨ íŒŒì¼ì˜ ì£¼ì„ í™•ì¸
3. replit.md ì°¸ê³ 
4. ì‚¬ìš©ìì—ê²Œ ëª…í™•íˆ ì§ˆë¬¸ (ì¶”ì¸¡ ê¸ˆì§€)

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:** 2025-11-09  
**ì‘ì„±ì:** Replit AI Agent (Claude Sonnet 4.5)  
**ê²€í† ì:** í”„ë¡œì íŠ¸ ì˜¤ë„ˆë‹˜ ğŸ’™
