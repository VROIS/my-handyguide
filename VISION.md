# 손안에 가이드 - 미래 비전 & 실행 계획

## 📱 핵심 철학
> "여행자의 미완성된 꿈을 완성하고, 누구나 자신의 이야기 속 주인공이 되는 경험"

---

## 🎯 3대 핵심 전략

### 1. 오프라인 강화 - "완전한 자유"
**목표**: 네트워크 제약 완전 제거

**기술 스택**:
- GEMMA 3B 온디바이스 모델 (1GB 미만)
- 스타링크 연동 (저궤도 위성)
- IndexedDB 캐싱 강화

**가치**: 
- 아마존 오지, 사하라 사막에서도 작동
- 진정한 모험 가능
- 데이터 요금 걱정 없음

**현실적 접근**:
- Phase 1: 이전 결과 캐싱 (오프라인 재생)
- Phase 2: 스타링크 API 연동
- Phase 3: 경량 온디바이스 모델 테스트

---

### 2. 드림 스튜디오 - "꿈의 현실화"
**목표**: 사용자가 주인공인 CF급 콘텐츠 생성

**콘셉트**:
```
사용자 실제 사진 
+ AI 생성 텍스트 (대사)
+ 영화감독 프롬프트
+ 사용자 얼굴 합성
= "아빠가 들려주는 루브르" 영상편지
```

**기술 스택**:
- Gemini Vision (Face ID 추출)
- Stable Diffusion (배경 합성)
- ControlNet (자세 제어)
- WebTTS (음성 생성)

**차별점**:
- 일반 앱: AI가 만든 가짜 사진
- 이 앱: **내 얼굴로 만든 진짜 경험**
- SNS 바이럴: "나도 주인공 되고 싶다"

**수익 모델**:
- 무료: 텍스트 오버레이 + AI 음성
- 프리미엄 ($9.99/월): Face ID 합성 10장

---

### 3. 구글맵 API - "완벽한 촬영 가이드"
**목표**: 빅데이터 기반 "인생샷 바이블" 자동 생성

**촬영 포인트 메타 프롬프트**:
```javascript
{
  Location_KR: "에펠탑",
  Spot_Name: "트로카데로 정원",
  Vibe_Keyword: ["웅장함", "대칭", "랜드마크"],
  Optimal_Lighting: "일출 블루 아워",
  Selection_Rationale: "소셜 미디어 최고 선호도",
  GPS: { lat: 48.8620, lng: 2.2876 },
  Best_Time: "06:30-07:30"
}
```

**4가지 과학적 기준**:
1. **랜드마크 상징성**: 트로카데로 = 에펠탑 공식 뷰
2. **독특한 구도**: 비르아켐 다리 아치 프레임
3. **시간대별 빛**: 사크레쾨르 일몰 노을
4. **파리지앵 감성**: 카페 드 플로르 테라스

**데이터 출처**:
- 인스타그램 해시태그 빅데이터
- Lonely Planet, Rick Steves 가이드북
- 전문 사진작가 포트폴리오
- 15년 현장 가이드 경험 (핵심!)

**기능**:
- 촬영 시 GPS 저장
- 공유 페이지에 촬영 팁 표시
- 시간대별 알림 ("지금 골든아워입니다!")
- 여행 루트 자동 생성

---

## 📅 단계별 실행 계획

### Phase 1: 즉시 실행 (1-2주)
**목표**: Featured Gallery 강화

#### 1.1 다운로드 수 표시 ✅
- DB 스키마: `downloads` 컬럼 추가
- Featured Gallery 카드에 아이콘 + 숫자
- API: `/api/share/download/:id` (카운트 증가)
- **예상 효과**: 인기 콘텐츠 시각화

#### 1.2 정렬 기능
- 인기순 (다운로드 많은 순)
- 최신순 (등록일 기준)
- **예상 효과**: 사용자 선택권 증가

#### 1.3 Admin 페이지 개선
- Featured 선정/해제 UI 개선
- 다운로드 통계 대시보드
- **예상 효과**: 큐레이션 효율 증가

---

### Phase 2: 1개월 후
**목표**: 드림 스튜디오 MVP

#### 2.1 기본 영상편지
- 사용자 사진 위에 AI 텍스트 오버레이
- WebTTS로 읽어주기
- "내 목소리로 설명하는 여행" 느낌
- **투자**: 개발 1주 / 비용 무료

#### 2.2 위치 정보 저장
- 촬영 시 GPS 저장
- 공유 페이지에 지도 표시 (Google Maps Embed)
- **투자**: 개발 3일 / 비용 월 $0-200 (무료 크레딧)

#### 2.3 촬영 팁 메타데이터 (수동 큐레이션)
- Admin 페이지에 메타데이터 입력 폼
- 파리 20곳 직접 입력 (15년 노하우)
- 공유 페이지에 "촬영 팁" 섹션 추가
- **투자**: 개발 2일 / 데이터 입력 4시간

---

## 🎬 드림 영상 (Dream Video) - 2025-12-21 신규 기획

### 핵심 컨셉: "AI 영상"이 아닌 "나의 드림 영상"

| 일반 AI 영상 | 손안의가이드 드림 영상 |
|-------------|---------------------|
| AI가 이미지 생성 | **내가 찍은 실제 사진** |
| 누구나 비슷한 결과물 | **내가 주인공으로 등장** |
| 범용 나레이션 | **내 여행에 맞춘 Gemini 해설** |
| 프롬프트 직접 작성 | **전문가 프롬프팅 내장** |

### 원소스 멀티유즈 파이프라인

```
📸 사진 촬영 (이미 보관함에 저장됨)
    ↓
🤖 Gemini 분석 → 텍스트 해설 (이미 완성!)
    ↓
🎬 Veo 3.1 API → 20초 드림 영상
    ↓
📱 SNS 공유 (인스타 릴스, 틱톡, 유튜브 쇼츠)
```

### 기술 스택: Veo 3.1 (Google Gemini API 확장)

**선택 이유:**
- 이미 Gemini API 키 연동 완료
- 음성(나레이션)이 영상에 자동 포함
- 이미지 3장까지 레퍼런스 사용 가능
- Runway보다 통합 편의성 우수

**API 스펙:**
| 항목 | 값 |
|------|-----|
| 1회 생성 길이 | 최대 8초 |
| 20초 만들기 | 8초 + 7초 연장 + 7초 연장 (3회 호출) |
| 생성 시간 (Fast) | ~60-90초/회 → 총 3-5분 |
| 비용 (Fast) | $0.15 × 22초 = **$3.30** |
| 비용 (Standard) | $0.40 × 22초 = **$8.80** |

### 사용자 플로우 (단순화)

```
[1단계] 보관함에서 사진 8-10장 선택
[2단계] 스타일 프리셋 1개 선택 (아래 5개 중)
[3단계] 본인 사진 추가 (선택)
[4단계] "영상 만들기" 클릭 → 3-5분 후 완성!
```

### 스타일 프리셋 (전문가 프롬프팅 내장)

| 프리셋 이름 | 스타일 | 카메라 무브 | 적합 장면 |
|------------|-------|-----------|----------|
| **🎬 시네마틱** | 영화 같은, 드라마틱 | 슬로우 돌리, 와이드샷 | 풍경, 건축물 |
| **📱 브이로그** | 친근한, 자연스러운 | 핸드헬드, POV | 먹방, 거리 |
| **✨ 에픽 리빌** | 웅장한, 감동적 | 크레인 업, 광각 | 일출, 전경 |
| **🌅 골든아워** | 따뜻한, 감성적 | 슬로모션, 백라이트 | 인물, 석양 |
| **🎭 아트필터** | 유화풍, 스튜디오 지블리 | 부드러운 패닝 | 미술관, 카페 |

### 프리셋 프롬프트 예시 (시네마틱)

```
Transform the travel photo into a cinematic motion scene.
Camera: slow dolly push-in, 50mm lens, medium-wide shot.
Lighting: soft ambient, golden hour warmth.
Motion cues: gentle wind, subtle parallax.
Aesthetic: teal-and-amber color grade, soft film grain.
Aspect: 16:9, 8 seconds, relaxed pacing.
Narration: [Gemini 생성 해설 삽입]
```

### 크레딧 체계

| 항목 | 크레딧 | USD 환산 |
|------|--------|----------|
| 드림 영상 생성 (20초) | -15 | ~$3.30 |
| 프리미엄 스타일 추가 | -5 | ~$1.00 |

### DB 스키마 설계 (신규 테이블)

```typescript
// 드림 영상 테이블
export const dreamVideos = pgTable("dream_videos", {
  id: varchar("id").primaryKey().default(sql`gen_random_uuid()`),
  userId: varchar("user_id").notNull().references(() => users.id),
  guideIds: text("guide_ids").array().notNull(), // 선택된 가이드 ID 배열
  selfieUrl: text("selfie_url"), // 본인 사진 URL (선택)
  stylePreset: varchar("style_preset").notNull(), // cinematic, vlog, epic, golden, art
  status: varchar("status").default('pending'), // pending, processing, completed, failed
  videoUrl: text("video_url"), // 생성된 영상 URL
  narrationScript: text("narration_script"), // Gemini 생성 나레이션
  veoJobId: varchar("veo_job_id"), // Veo API 작업 ID
  duration: integer("duration").default(20), // 영상 길이 (초)
  creditsUsed: integer("credits_used").default(15),
  errorMessage: text("error_message"),
  createdAt: timestamp("created_at").defaultNow(),
  completedAt: timestamp("completed_at"),
});
```

### API 엔드포인트 설계

```
POST /api/dream-video/create
  - guideIds: string[]
  - stylePreset: 'cinematic' | 'vlog' | 'epic' | 'golden' | 'art'
  - selfieUrl?: string
  → 크레딧 차감 + Veo API 호출 시작 + job ID 반환

GET /api/dream-video/:id/status
  → 생성 진행률 (pending, 33%, 66%, completed)

GET /api/dream-video/:id
  → 완성된 영상 정보 (videoUrl, duration, etc.)

GET /api/dream-videos
  → 내 영상 목록
```

### UI 배치: 보관함 페이지

```
보관함 → 선택 모드 → [공유페이지 만들기] [영상 만들기 🆕]
                                ↓
                      스타일 선택 모달 팝업
                                ↓
                      생성 진행 표시 (3-5분)
                                ↓
                      완성! 다운로드/공유
```

### 구현 우선순위

1. **서버 라우트**: Veo 3.1 API 연동 + 폴링 시스템
2. **DB 마이그레이션**: dreamVideos 테이블 생성
3. **프론트 UI**: 스타일 선택 모달 + 진행 표시
4. **프리셋 프롬프트**: 5개 스타일별 전문가 프롬프트
5. **크레딧 연동**: 생성 시 차감 로직
6. **다운로드/공유**: MP4 저장 + SNS 공유 버튼

### 예상 일정: 1주

| 일차 | 작업 |
|------|------|
| 1일차 | Veo 3.1 API 연동 테스트, DB 스키마 |
| 2일차 | 서버 라우트 + 폴링 시스템 |
| 3일차 | 프리셋 프롬프트 5개 작성 |
| 4일차 | 프론트 UI (선택 모달, 진행 표시) |
| 5일차 | 크레딧 연동 + 다운로드 |
| 6일차 | 테스트 + 버그 수정 |
| 7일차 | 배포 + 모니터링 |

### 공유페이지와의 관계

- **공유페이지**: "읽는 여행 기록" (텍스트 + 이미지 + TTS)
- **드림 영상**: "보여주는 여행 자랑" (동영상 + 음성)
- **공존 가능**: 공유페이지 유지, 드림 영상은 프리미엄 추가 기능

---

### Phase 3: 3개월 후 (수익화)
**목표**: 로컬 가이드 마켓플레이스

#### 3.1 큐레이션 판매
- "파리 20 베스트샷" 프리미엄 가이드
- 월 $4.99 구독
- 수익 분배: 가이드 70% / 플랫폼 30%
- **예상 수익**: 사용자 1,000명 × 5% 전환 = 50명 × $4.99 = $250/월

#### 3.2 프리미엄 드림 스튜디오
- Face ID 합성 기능
- CF급 사진 10장/월
- 월 $9.99
- **예상 수익**: 사용자 1,000명 × 2% 전환 = 20명 × $9.99 = $200/월

#### 3.3 B2B 전환
- 관광청 데이터 판매
- 호텔/레스토랑 프로모션
- **잠재 가치**: 위치 + AI 분석 = 관광 빅데이터

---

### Phase 4: 6개월 후 (스케일링)
**목표**: 글로벌 확장

#### 4.1 다국어 지원
- 영어, 일본어, 중국어 추가
- Gemini 다국어 프롬프트

#### 4.2 AI 자동 큐레이션
- 사용자 업로드 → 자동 메타데이터 생성
- Gemini Vision + Google Places API

#### 4.3 AR 기능 (선택)
- Gemini Live 연동
- 실시간 카메라 정보 오버레이

---

## 💰 예상 비용 구조

### 개발 단계 (현재)
- Replit 호스팅: $0 (무료 플랜)
- Gemini API: ~$20/월 (1,000 요청)
- 데이터베이스: $0 (Replit 내장)
- **총합**: $20/월

### 성장 단계 (사용자 1,000명)
- Replit Autoscale: $20/월
- Gemini API: ~$200/월 (10,000 요청)
- Google Maps API: $200/월 (무료 크레딧)
- 스토리지 (이미지): $50/월
- **총합**: $470/월

### 수익화 단계
- 수입: $450/월 (구독 + 프리미엄)
- 지출: $470/월
- **손익분기점**: 사용자 1,200명

---

## 🎯 핵심 경쟁력

### 1. 현장 가이드 15년 노하우
```
개발자가 만든 앱 ❌
현장 가이드가 여행자 행동 데이터로 만든 앱 ✅
```

### 2. 차별화된 데이터
- 구글맵: 장소 정보
- 인스타그램: 예쁜 사진
- **손안에 가이드**: "어디서, 언제, 어떻게 찍어야 인생샷"

### 3. 감성 중심 설계
- 불필요한 버튼 제거 (PDA 느낌)
- WebTTS 에러 읽기 (시각 피로 제로)
- 1분 오디오 (여행자 집중력 고려)

---

## 📊 성공 지표 (KPI)

### Phase 1 (1개월)
- [ ] Featured Gallery 다운로드 10회 이상
- [ ] 일일 활성 사용자 50명
- [ ] 공유 링크 클릭률 5%

### Phase 2 (3개월)
- [ ] 드림 스튜디오 사용률 20%
- [ ] 평균 보관 아이템 5개/사용자
- [ ] 재방문율 30%

### Phase 3 (6개월)
- [ ] 유료 구독자 50명
- [ ] 월 매출 $500
- [ ] NPS 점수 40+

---

## 🔧 기술 업그레이드 로드맵 (2025-12-21 추가)

### 1. AI 모델 업그레이드

**온라인 모드:**
| 모델 | 용도 | 성능 |
|------|------|------|
| Gemini 3.0 Flash | 실시간 이미지 분석 | 2.5 Pro 대비 3배 빠름, 218 토큰/초 |
| Gemini 2.5 Flash TTS | 음성 출력 | 저지연, 자연스러운 음성 |

**오프라인 모드:**
| 모델 | 용도 | 사양 |
|------|------|------|
| Gemma 3N (WebGPU) | 온디바이스 이미지 분석 | 529MB, 2-3GB RAM |
| 브라우저 TTS | 음성 출력 | 네이티브 API |

**아키텍처:**
```
[온라인 감지]
├─ Gemini 3.0 Flash → 실시간 카메라/이미지 분석
└─ Gemini 2.5 Flash TTS → AI 음성 출력

[오프라인 감지] → 자동 전환

[오프라인 모드]
├─ Gemma 3N (WebGPU) → 로컬 분석
└─ 브라우저 TTS → 음성 출력
```

### 2. 네이티브 앱 전환 (장기)

**목표:** iOS PWA 카메라 권한 버그 완전 해결

| 프레임워크 | 선택 이유 |
|-----------|----------|
| React Native + Expo | JavaScript 기반, 기존 코드 재사용 용이 |

**배포 비용:**
- Google Play: $25 (1회)
- App Store: $99/년

---

## 🎭 재미 요소 - 사용자 흥미 & 바이럴 (2025-12-21 추가)

### 1. AI 캐릭터 가이드 시스템

**콘셉트:** 같은 장소도 캐릭터별 다른 설명

| 캐릭터 | 말투 예시 |
|--------|----------|
| 사투리 할머니 | "어머~ 이게 에펠탑이여~ 1889년에 지어졌다고 하네~" |
| 개그맨 아저씨 | "여러분! 이 탑이요~ 원래 20년 뒤에 철거 예정이었대요! 근데 라디오 안테나로 쓰다 보니..." |
| 역사 교수 | "1889년 만국박람회를 위해 건설된 이 철탑은..." |
| 힙한 MZ | "여기 진짜 인생샷 맛집이에요~ 트로카데로에서 찍어야 레전드!" |

**구현:** Gemini 프롬프트에 캐릭터 페르소나 추가

### 2. 밈/짤 생성기

**콘셉트:** SNS 공유용 재미있는 콘텐츠 자동 생성

- 사진 + AI 밈 텍스트 오버레이
- "여기가 바로 그 전설의..." 드라마틱 시작
- 인스타/틱톡 공유 최적화

### 3. 게이미피케이션 (뱃지/포인트)

| 뱃지 | 조건 |
|------|------|
| 🌍 탐험가 | 10개 장소 촬영 |
| 📸 포토그래퍼 | 50장 사진 분석 |
| 🔗 인플루언서 | 공유 10회 |
| 🏆 마스터 가이드 | 모든 뱃지 획득 |

### 4. 스토리텔링 모드

**콘셉트:** 장소의 재미있는 비하인드 스토리

- 드라마/영화 촬영지 연결
- "여기서 그 유명한 장면 찍었대요!"
- 역사적 일화, 숨겨진 이야기

---

## ⚠️ iOS PWA 제한사항 (2025-12-21 기록)

### WebKit 카메라 권한 버그

| iOS 버전 | 상태 |
|---------|------|
| iOS 15 이하 | ✅ 정상 작동 |
| iOS 16.4+ | ❌ standalone PWA에서 카메라 권한 팝업 안 뜸 |

**원인:** Apple WebKit 버그 #215884 (미해결)

**현재 해결책:**
1. Safari 브라우저에서 직접 사용 (홈화면 추가 X)
2. QR 코드로 접속 (브라우저에서 열림)
3. 네이티브 앱 배포 (장기)

**manifest.json 설정:**
- `display: "browser"` → 브라우저에서 열리도록 변경
- 단, iOS는 이 설정 무시하고 항상 standalone 모드로 열림

---

## 🚀 장기 비전: VibeTrip (별도 프로젝트)

> "이질적인 데이터(감성 Vibe + 실시간 현실 Reality)를 통합하는 초개인화 여행 에이전트"

### 핵심 기능 (PRD 요약)

1. **Vibe Scoring:** 이미지/리뷰 분석 → 장소 감성 점수 산출
2. **Real-time Reality Check:** 날씨, 파업, 시위 정보 실시간 반영
3. **동선 최적화:** Time vs Money 로직 (대중교통 vs 택시)
4. **리얼 숏폼 미리보기:** 실제 영상으로 15~30초 자동 생성
5. **예약/결제 자동화:** 앱 이탈 없이 원스톱 완료

### 기술 스택 (TRD 요약)

| 계층 | 기술 |
|------|------|
| 프론트엔드 | React Native / Flutter |
| 백엔드 | Python (FastAPI) |
| AI | Gemini Vision + Text |
| DB | PostgreSQL + MongoDB + Vector DB (Pinecone) |
| API | Google Maps + Amadeus/Sabre + Stripe |

### 개발 예상

| 항목 | 예상 |
|------|------|
| 개발 기간 | 6-12개월 |
| 팀 규모 | 2-3명 |
| 비용 | 높음 (별도 예산 필요) |

**결론:** 현재 손안에 가이드와 병행하여 별도 장기 프로젝트로 진행

---

## 🚀 최종 비전
> "세계 모든 여행자의 손 안에 있는 개인 큐레이터"

80일간 혼자 만든 앱이  
2025년 글로벌 여행 플랫폼으로 성장하는 여정

**Made by 현장 가이드 15년 × 독학 개발자**

---

*문서 작성일: 2025-10-05*  
*최종 업데이트: 2025-12-21 (기술 업그레이드 + 재미 요소 + iOS 제한사항 + VibeTrip 비전 추가)*
